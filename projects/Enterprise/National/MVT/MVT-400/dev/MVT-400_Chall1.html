<style>
  .iso-hide {
    display: none !important;
  }
  .iso-sticky.progress-bar-wrapper {
    /*position: absolute;*/
  }
  .iso-test .page__header__global {
    border-bottom: 1px solid #BFC0C1;
  }
  .progress-bar-wrapper {
    display: flex;
    background-color: #f0f0f0;
    position: fixed;
    top: 65px;
    left: 0;
    z-index: 1;
    width: 100%;
    border-bottom: 1px solid #bfc0c1;
  }
  .step-wrapper {
    margin-top: 10px;
    display: flex;
    justify-content: space-between;
    align-content: center;
    width: 100%;
    margin-bottom: 5px;
  }
  .step-item {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    font-size: 12px;
  }

  .step-item::before {
    position: absolute;
    content: "";
    border-bottom: 1px solid #bfc0c1;
    width: 100%;
    top: 10px;
    left: -50%;
    z-index: 2;
  }

  .step-item::after {
    position: absolute;
    content: "";
    border-bottom: 1px solid #bfc0c1;
    width: 100%;
    top: 10px;
    left: 50%;
    z-index: 2;
  }

  .step-item .step-index {
    position: relative;
    z-index: 5;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 22px;
    height: 22px;
    border: 1px solid #bfc0c1;
    border-radius: 50%;
    background: #f0f0f0;
    color: #6d6d6d;
    margin-bottom: 6px;
  }
  .step-item.active .step-index,
  .step-item.active.visited .step-index {
    background: #00703c;
    color: #ffffff;
    border: 1px solid #00703c;
  }
  .step-item.visited .step-index {
    border: 1px solid #00703c;
    color: #00703c;
    background: #f0f0f0;
  }

  .step-item.active .step-title {
    opacity: 1;
    font-weight: 600;
    text-align: center;
    line-height: 14px;
    font-size: 14px;
  }
  .step-item.active .step-num {
    font-weight: 600;
  }
  .step-item .step-num {
    margin-top: 1px;
  }
  .step-item .step-title {
    opacity: 0;
  }
  .step-item.step-1 .step-title {
    position: absolute;
    top: 50%;
  }

  .step-item.completed .step-index {
    background-color: #f0f0f0;
    border: 1px solid #00703c;
  }
  .step-item.completed .step-num {
    opacity: 0;
  }
  .step-item.completed::after {
    position: absolute;
    content: "";
    border-bottom: 1px solid #00703c;
    width: 100%;
    top: 10px;
    left: 50%;
    z-index: 3;
  }

  .step-item:first-child::before {
    content: none;
  }
  .step-item:last-child::after {
    content: none;
  }

  .step-item.completed .step-index:after,
  .step-item.completed .step-index:before {
    border: solid #00703c;
    border-width: 0 2px 2px 0;
    content: "";
    display: block;
    height: 10.56px;
    left: 7px;
    position: absolute;
    top: 3px;
    transform: rotate(45deg);
    width: 6px;
  }

  .dropdown-chevron {
    flex: 0 0 64px;
    display: flex;
    align-content: center;
    background: rgba(191, 192, 193, 0.2);
  }

  .dropdown-chevron > div {
    margin: auto;
    transition: transform 400ms cubic-bezier(0.445, 0.05, 0.55, 0.95);
    border-left: 0.3125rem solid transparent;
    border-right: 0.3125rem solid transparent;
    border-top: 0.3125rem solid #6D6D6D;
  }
  .dropdown-chevron.dropdown-selected > div {
    transform: rotate(-180deg);
    border-top: 0.3125rem solid #00703c;
  }
  .iso-test .page__header .reserve__progress-total:after {
    border-left: 0.3125rem solid transparent;
    border-right: 0.3125rem solid transparent;
    border-top: 0.3125rem solid #6D6D6D;
    top: 60%;
  }
    .iso-test .page__header .reserve__progress-total.iso-disable {
    pointer-events: none;
  }
  .iso-test .page__header .reserve__progress-total.iso-disable:after {
    display: none;
  }
  .iso-test .page__header--active .iso-active.reserve__progress-total:after {
    transform: rotate(-180deg) ;
    border-top: 0.3125rem solid #00703c;
    top: 40%;
  }
  .page__header--active .reserve__progress-total:after {
    transform: none;
  }
  .iso-test .page__header .reserve__progress-menu-total-amount:after , .iso-test .page__header .reserve__progress-menu-total--open .reserve__progress-menu-total-amount:after {
    display: none;
  }
  .iso-test .page__header .reserve__progress-menu-total:hover,.iso-test .page__header .reserve__progress-menu-total:focus,.iso-test .page__header .reserve__progress-menu-total.reserve__progress-menu-total--open {
    pointer-events: none;
    min-height: 9.375rem;
  }
  .iso-test .page__header .reserve__progress-menu-price-breakdown-wrap>div>p, .iso-test .page__header .line-items, .iso-test .page__header .section-title {
    font-size: 12px;
  }
  .iso-test .page__header .reserve__progress-menu-price-breakdown--pricing .reserve__progress-menu-price-breakdown-wrap-contract {
    padding-bottom: 0px;
    border-bottom: none;
    margin-bottom: none;
  }

  .iso-test .page__header__menu {
    padding-top:0px;
  }
 .iso-test .page__header__login--authorized .icon--triangle {
    border-top-color: #6D6D6D;
    transition: transform 400ms cubic-bezier(0.445, 0.05, 0.55, 0.95);
  }
  .iso-test .page__header__login--authorized .icon--triangle.icon--triangle-active {
    transform: rotate(-180deg);
    border-top-color: #00703c;
  }
  @media screen and (max-width: 40em) {
    .page__content {
      padding-top: 9.0625rem;
    }
    .reserve__progress-menu .reserve__progress-menu-item:first-child {
      padding-top: 5.25rem;
    }
    .iso-test .page__header__global {
      background-color: transparent;
    }
     .iso-test .page__header--active {
      overflow-y: hidden;
    }
  }

  @media screen and (min-width: 40.0625em) and (max-width: 56.9375em) {
    .page__content {
      padding-top: 9.0625rem;
    }
    .reserve__progress-menu .reserve__progress-menu-item:first-child {
      padding-top: 7.25rem;
    }
    .iso-test .page__header__menu {
      padding-top:66px;
    }
  }
</style>
<script>
  (function () {
    "use strict";
    var isoTest = {
      account: "EHI",
      portfolio: "National",
      test: "MVT-400",
      creative: "Challenger 1",
      selector: ".page__header.reserve__progress",
      parentSelector: ".reserve",
      progressHTML:
        '<div class="progress-bar-wrapper"> <div class="step-wrapper"> <div class="step-1 step-item completed"> <div class="step-index"><div class="step-num">1</div></div><div class="step-title">Pick Up & Return</div></div><div class="step-2 step-item active"> <div class="step-index"><div class="step-num">2</div></div><div class="step-title">Vehicle</div></div><div class="step-3 step-item"> <div class="step-index"><div class="step-num">3</div></div><div class="step-title">Add-ons</div></div><div class="step-4 step-item"> <div class="step-index"><div class="step-num">4</div></div><div class="step-title">Review</div></div></div><div class="dropdown-chevron"><div> </div>',
      stepLocation: "",
      init: function () {
       // isoTest.debug = true;

        if (
          _satellite &&
          typeof _satellite.setVar === "function" &&
          typeof _satellite.track === "function"
        ) {
          _satellite.setVar("TargetCampaign", isoTest.test);
          _satellite.setVar("TargetCreative", isoTest.creative);
        }

        isoTest.log("Test Running...");
        isoTest.log(isoTest.account + " - " + isoTest.portfolio);
        isoTest.log(isoTest.test + " - " + isoTest.creative);

        helpers.elementLoaded(isoTest.selector, function () {
          isoTest.log("Test Ready!");
          isoTest.chall();
        });

        window.addEventListener("hashchange", isoTest.viewChange, false);
      },

      viewChange: function () {
        isoTest.log("viewChange");
        helpers.elementLoaded(isoTest.selector, function () {
         document.querySelector(isoTest.parentSelector).classList.add('iso-test');
         isoTest.checkProgress();
         
        });
      },

      //Check for location hash
      checkHash: function () {
        return location.hash;
      },

      //Update Progress
      updateProgress: function (n) {
        for (var i = n; i > 1; i--) {
          document.querySelector(".step-item.step-" + (i - 1)).classList.add("completed");
        }
      },

      //Check for completed steps inflight
      checkVisited: function (n) {
        var visitedSteps = document.querySelectorAll(".step-item.completed");
        visitedSteps.forEach((step) => {
          var num = isoTest.getStepNumber(step);
          if (num >= n) {
            step.classList.remove("completed");
          }
        });
      },

      getStepNumber: function (step) {
        return parseInt(step.className.split(" ")[0].split("-")[1]);
      },

      //Check progress at each step
      checkProgress: function () {
        isoTest.stepLocation = isoTest.checkHash();
        isoTest.log(isoTest.stepLocation);
        var step1 = document.querySelector(".step-1.step-item");
        var step2 = document.querySelector(".step-2.step-item");
        var step3 = document.querySelector(".step-3.step-item");
        var step4 = document.querySelector(".step-4.step-item");

        if (document.querySelector(".step-item.active")) {
          document.querySelector(".step-item.active").classList.remove("active");
        }
         isoTest.updateTotal();
        switch (isoTest.stepLocation) {
          case "#/start":
          case "#/map_pickup":
            step1.classList.add("active");
            isoTest.checkVisited(1);
            break;
          case "#/car_select":
            step2.classList.add("active");
            step2.classList.add("visited");
            isoTest.updateProgress(2);
            isoTest.checkVisited(2);
            break;
          case "#/extras":
            step3.classList.add("active");
            step3.classList.add("visited");
            isoTest.updateProgress(3);
            isoTest.checkVisited(3);

            break;
          case "#/review":
            step4.classList.add("active");
            step4.classList.add("visited");
            isoTest.updateProgress(4);
            break;

          default:
            break;
        }
      },
     updateTotal: function() {
        var total = document.querySelector("button.reserve__progress-total");
        if(total.textContent == 'Total--') {
          total.classList.add('iso-disable');
        } else {
          total.classList.remove('iso-disable');
        }
      },
      addEvents: function () {
        var totalPrice = document.querySelector("button.reserve__progress-total");
        var progressBar = document.querySelector('.progress-bar-wrapper');
        var dropdown = document.querySelector('.page__header.reserve__progress');
        var progressMenu = document.querySelector('.reserve__progress-menu-item-wrap');
        var chevron = document.querySelector('.dropdown-chevron');
        

        totalPrice.addEventListener('click',function(e){
            e.preventDefault();
            var pricingMenu = document.querySelector('button.reserve__progress-menu-total');
            if(pricingMenu) {
              pricingMenu.click();
            }
            isoTest.fireTag('button.reserve__progress-total', "National:RW:Price Toggle");
            if(dropdown.classList.contains('page__header--active')) {
                dropdown.classList.remove('page__header--active');
                totalPrice.classList.remove('iso-active');
if(progressBar.classList.contains('iso-hide')){
                  progressBar.classList.remove('iso-hide')
                }
                if(progressBar.classList.contains('iso-sticky')) {
                 // console.log('sticky open');
                  totalPrice.classList.add('iso-active');
                  if(!progressBar.classList.contains('iso-hide')){
                    progressBar.classList.add('iso-hide')
                  }
                }
            } else {
                dropdown.classList.add('page__header--active');
                totalPrice.classList.add('iso-active');
 if(!progressBar.classList.contains('iso-hide')){
                  progressBar.classList.add('iso-hide')
                }
            }
           !progressMenu.classList.contains('iso-hide') ? progressMenu.classList.add('iso-hide') : null;
           // progressBar.classList.contains('iso-hide') ? progressBar.classList.remove('iso-hide'): progressBar.classList.add('iso-hide');
            progressBar.classList.contains('iso-sticky') ? progressBar.classList.remove('iso-sticky'): null;
            chevron.classList.contains('dropdown-selected') ? chevron.classList.remove('dropdown-selected') :null;
          });


        progressBar.addEventListener('click',function(){
            isoTest.fireTag('.progress-bar-wrapper', "National:RW:Progress Toggle"); 
            var pricingMenu = document.querySelector('button.reserve__progress-menu-total');
            chevron.classList.contains('dropdown-selected') ? chevron.classList.remove('dropdown-selected') : chevron.classList.add('dropdown-selected');
 !document.body.classList.contains('disable-scroll') ? document.body.classList.add('disable-scroll') : document.body.classList.remove('disable-scroll');           dropdown.classList.contains('page__header--active') ? dropdown.classList.remove('page__header--active') :dropdown.classList.add('page__header--active');
            !progressBar.classList.contains('iso-sticky') ? progressBar.classList.add('iso-sticky') : progressBar.classList.remove('iso-sticky');
            progressMenu.classList.contains('iso-hide') ? progressMenu.classList.remove('iso-hide') : null;
            pricingMenu ? !pricingMenu.classList.contains('iso-hide') ? pricingMenu.classList.add('iso-hide'): null : null;
        });

        helpers.addEventOn("click",".reserve__progress-menu-item-toggle--complete,.reserve__progress-menu-item-toggle--complete>span",function () {
            chevron.classList.contains("dropdown-selected")? chevron.classList.remove("dropdown-selected") : chevron.classList.add("dropdown-selected");
            dropdown.classList.contains("page__header--active")? dropdown.classList.remove("page__header--active")  : dropdown.classList.add("page__header--active");
            progressBar.classList.contains('iso-sticky') ? progressBar.classList.remove('iso-sticky'): null;
          document.body.classList.contains('disable-scroll') ? document.body.classList.remove('disable-scroll') : null;
          }
        );

        helpers.addEventOn("click",".profile-nav-modal button.modal__btn-close",function(){
              progressBar.classList.remove('iso-hide');
document.body.classList.contains('disable-scroll') ? document.body.classList.remove('disable-scroll') : null;
        });

        helpers.addEventOn("click",".page__header__login a.page__header__login--authorized,.page__header__login a.page__header__login--authorized i.icon--triangle",function(){
          
              if(document.querySelector('.page__header__login--active')) {
                  
                if(!progressBar.classList.contains('iso-hide')) {
                    progressBar.classList.add('iso-hide');
                    
                  }
              } else {
                  
                if(progressBar.classList.contains('iso-hide')) {
                    progressBar.classList.remove('iso-hide');
                      
                  }
              }
       dropdown.classList.contains("page__header--active")? dropdown.classList.remove("page__header--active"): null;
       progressBar.classList.contains('iso-sticky') ? progressBar.classList.remove('iso-sticky'): null;
       chevron.classList.contains('dropdown-selected') ? chevron.classList.remove('dropdown-selected') :null;
       totalPrice.classList.contains('iso-active') ? totalPrice.classList.remove('iso-active') : null;
           document.body.classList.contains('disable-scroll') ? document.body.classList.remove('disable-scroll') : null;
        });
            helpers.addEventOn("click",".page__header__login a.page__header__login--authorized i.icon--triangle span.icon__text",function(){
 //console.log(e.target);
              if(document.querySelector('.page__header__login--active')) {
                if(!progressBar.classList.contains('iso-hide')) {
                    progressBar.classList.add('iso-hide');
                  }
              } else {
                if(progressBar.classList.contains('iso-hide')) {
                    progressBar.classList.remove('iso-hide');
                  }
              }
       dropdown.classList.contains("page__header--active")? dropdown.classList.remove("page__header--active"): null;
       progressBar.classList.contains('iso-sticky') ? progressBar.classList.remove('iso-sticky'): null;
       chevron.classList.contains('dropdown-selected') ? chevron.classList.remove('dropdown-selected') :null;
       totalPrice.classList.contains('iso-active') ? totalPrice.classList.remove('iso-active') : null;
       document.body.classList.contains('disable-scroll') ? document.body.classList.remove('disable-scroll') : null;
        });
   //resizing 
        window.addEventListener('resize',function(){
          if(progressBar.classList.contains('iso-sticky')) {
            !document.body.classList.contains('disable-scroll') ? document.body.classList.add('disable-scroll') : null;
          }
        });
      },

      chall: function () {
        // Your code goes here
        if (!document.querySelector(".progress-bar-wrapper")) {
          document.querySelector(isoTest.selector).insertAdjacentHTML("afterbegin", isoTest.progressHTML);
        }
        document.querySelector(isoTest.parentSelector).classList.add('iso-test');
        isoTest.checkProgress();
        isoTest.addEvents();
      },

      fireTag: function (element, value) {
        var linkName = value ? value : element.innerText;
        linkName = isoTest.test ? isoTest.test + " : " + linkName : linkName;
        s.linkTrackVars = "eVar20";
        s.eVar20 = linkName;
        s.tl(this, "o", linkName);
      },

      log: function (obj) {
        if (isoTest.debug === true) {
          console.log(obj);
        }
      },
    };

    var helpers = {
      //adding helper to add events to multiple elements
      addEventOn: function (eventType, selector, action) {
        document.addEventListener(eventType, function (e) {
          var target = e.target;
          if (target.matches(selector)) {
            action(e);
          } else {
            while (target && target.parentNode !== document) {
              target = target.parentNode;
              if (!target) {
                return;
              }
            }
          }
        });
      },

      elementLoaded: function (ele, callback) {
        isoTest.log("elementLoaded::  " + ele + " - Checking...");
        window.clearTimeout(isoTest.eleTimer);
        if (document.querySelectorAll(ele).length > 0) {
          if (typeof callback === "function") {
            isoTest.log("elementLoaded::  " + ele + " - Found!");
            callback();
          }
        } else {
          isoTest.eleTimer = window.setTimeout(function () {
            helpers.elementLoaded(ele, callback);
          }, 100);
        }
      },
      supplant: function (str, o) {
        return str.replace(/{([^{}]*)}/g, function (a, b) {
          var p = b.split(/\./),
            c = o;
          for (var i = 0; i < p.length; i++) {
            if (c[p[i]] == null) return a;
            c = c[p[i]];
          }
          return typeof c === "string" || typeof c === "number" ? c : a;
        });
      },
    };

    isoTest.init();
  })();
</script>