<style>
	#outer-box {
		margin-bottom: 3px;
		overflow: hidden;
	}

  #outer-box .center {
  	background-color: #ffffff;
  	height: 95px;
  	margin: auto;    
    padding-bottom: 10px;
    padding-top: 10px;
    padding-left: 2px;
    padding-right: 2px;
    position: relative;
    text-align: center;
	}

	#outer-box .row {
  	margin:auto; 
  	position: relative; 
  	overflow: hidden;
  }

	#outer-box .overlay, #outer-box .overlay-a {
	  height:100px;
	  left: 0; 
	  position:absolute;
	  top:-3px;
	  width:160px; 
	}

	#outer-box .overlay-a {
		color: #337ab7;
	  z-index: 5;
	}

	#outer-box .a {
		background-color: transparent;
    color: #337ab7;
    text-decoration: none;
	}

	#outer-box .container-widget, #outer-box .container-text {
    float: left;
    min-height: 1px;
    padding-right: 15px;
    position: relative;
	}

	#outer-box .container-widget {
    width: 160px;
	}	

	#outer-box .container-text {
		float: right;
		height: 75px;
    padding-left: 15px;
    padding-bottom: 10px;
    padding-top: 10px;
    text-align: left;
    width: 70%;
	}

	#outer-box .label-text {
		color: #333333;
    font-size: 11px; 
    font-weight: 400; 
    margin-top: 10px;
  }

  #outer-box .image-container {
    background: url('https://s3.amazonaws.com/uploads.hipchat.com/9506/4571221/MCgD8XtBy4Z2gEY/GoogleMaps.png') no-repeat;
    background-position: -27px -10px;
    background-size: auto 50px;
    float: left;
    height: 32px;
    width: 35px;
  }

  #outer-box .reviews-label {
    color: #333333; 
    margin-top: 10px;
  }

	#outer-box .title-container {
		border-width: 1px;
		display: flex;
    flex-direction: column;
    height: inherit;
    justify-content: space-between;
	}

	#outer-box .title-text {
		color: #333333; 
		font-size: 16px;
		font-weight: 400;
	}

	#outer-box .location-name {
    font-family: 'Arial-BoldMT', 'Arial Bold', 'Arial';
    font-weight: 700;
	}

	#modal.reviews-modal { 
		margin: 30px auto;
		width: 600px;
	}

	#modal.reviews-modal .custom-text {
		border-bottom: 1px solid #005092;
    color: #ffffff;
    display: inline-block;
    padding: 0 0px 10px 0 !important;
    width: 100%;
	}

	#modal.reviews-modal #modal-footer {
		align-items: center; 
		padding-top: 20px;
	}

	#modal.reviews-modal #modal-footer img {
		display: block; 
		margin-left: auto; 
		margin-right: auto; 
		margin-top: -5px; 
		vertical-align: middle;
	}

	#modal.reviews-modal #review-iframe {
		border-width: 0;
		height: 600px; 
		margin: auto;
    width: 565px;
	}

	#modal.reviews-modal #review-iframe-container {
		margin-top: 15px;
	}

	@media screen and (max-width: 999px){
    #outer-box .container-text {
      float: none;
      margin-left: 160px;
    }
  }

	@media screen and (min-width: 560px) and (max-width: 768px){
		#modal.reviews-modal {
			margin: 30px auto;
			width: 530px; 
		}

		#modal.reviews-modal #review-iframe {
			height: 540px; 
			width: 500px;
		}
	}

	@media screen and (max-width: 768px){
    #outer-box .container-text {
      width: 65%;
    }
	}

	@media screen and (max-width: 620px){
    #outer-box .container-text {
    	height: 85px;
      padding-bottom: 5px;
    	padding-top: 5px;
    	width: 63%;
    }

    #outer-box .location-name {
			display: block;
		}
  }

  @media screen and (max-width: 565px){
    #outer-box .container-text {
      width: 60%;
    }

		#modal.reviews-modal {
			margin: 0 auto;
			width: 100%; 
		}

		#modal.reviews-modal .custom-text {
			display: block;
			margin: auto;
			width: 90%;
		}

		#modal.reviews-modal #review-iframe {
			display: block;
			margin-top: 10px;
			width: 90%; 
		}
	}

	@media screen and (max-width: 500px){
    #outer-box .container-text {
      margin-left: 110px;
      width: 60%;
    }

    #outer-box .overlay, #outer-box .overlay-a { 
    	left: -10px;
      -webkit-transform: scale(.9);
      -moz-transform: scale(.9);
      -o-transform: scale(.9);
      transform: scale(.9);
    }
  }

	@media screen and (max-width: 400px){
		#outer-box .container-text {
      margin-left: 90px;
      width: 63%;
    }

		#outer-box .overlay, #outer-box .overlay-a { 
			left: -15px;
      -webkit-transform: scale(.75);
      -moz-transform: scale(.75);
      -o-transform: scale(.75);
      transform: scale(.75);
      width: 140px;
    }
	}
</style>

<script>
(function() {
	'use strict';
	var isoTest = {
		debug : false,
		account : "Enterprise",
		portfolio : "Alamo.com",
		test : "Reputation Pilot Funnel II",
		cookieName : 'alReputationPilotFunnel2',
		creative : "Challenger 1",
		customMbox : 'alReputationPilotFunnel2Clicks',
		placement: '.blockPrimary',
		modalPlacement: '#modal.reviews-modal .content',
		reputation:{
			loc_url: 'https://widgets.reputation.com/widgets/58cc518ab6f00825394765fa/run?tk=35e67e551f1&lc=',
			review_url: 'https://widgets.reputation.com/widgets/5a7a500d2438d3309706e51b/run?tk=35e67e551f1&lc=',
			all_url: 'https://widgets.reputation.com/widgets/58d451cf7c4fe6058db90265/run?tk=7c5eae1fd3f&filterName=__alamo_all__&preview=true&filterValues='
		},
		template: '<div id="outer-box">\
				<div class="row center">\
			  	<div class="container-widget">\
			  		<div id="innerdiv">\
			    		<iframe id="reputation" class="overlay" src="https://widgets.reputation.com/widgets/58cc518ab6f00825394765fa/run?tk=35e67e551f1&lc=08H1" title="Ratings Only - Demo" frameborder="0" scrolling="no" align="center"></iframe>\
			    		<a class="overlay-a" href="#" data-toggle="modal" data-target="#modal"></a>\
			    	</div>\
			  	</div>\
			    <div class="container-text">\
			    	<div class="title-container">\
			    		<span class="title-text">Alamo Rent-A-Car at <span class="title-text location-name">Indianapolis Airport (IND)</span></span>\
			    		<br>\
			    		<div class="g-container">\
			    			<div class="image-container"></div>\
                <div class="label-text">Reviews from Google</div>\
			    		</div>\
			    	</div>\
			    </div>\
			  </div>\
		  </div>',
		modalContent: '<h2 class="modal-title custom-text">Customer Reviews <span id="code"></span></h2>\
			<br>\
			<div id="review-iframe-container">\
				<iframe id="review-iframe" name="review-iframe" src="https://widgets.reputation.com/widgets/5a7a500d2438d3309706e51b/run?tk=35e67e551f1&lc=08H1"></iframe>\
			</div>\
			<div id="modal-footer">\
			  <img src="https://s3.amazonaws.com/uploads.hipchat.com/9506/4571221/QVBSv70aPjXZIvO/Screen%20Shot%202018-02-06%20at%202.53.43%20PM.png">\
			</div>',
		init : function() {

			isoTest.debug = Boolean(helpers.getQueryParam('debug'));

			if (_satellite && _satellite.setVar && typeof _satellite.setVar === 'function') {
				_satellite.setVar('TargetCampaign', isoTest.test);
				_satellite.setVar('TargetCreative', isoTest.creative);
				if (typeof window.isoSetTargetVars === 'function') {
					window.isoSetTargetVars();
				}
			}

			isoTest.log("Test Running...");
			isoTest.log(isoTest.account + " - " + isoTest.portfolio);
			isoTest.log(isoTest.test + " - " + isoTest.creative);
			
			isoTest.dependsLoaded(function() {
				isoTest.elementLoaded(isoTest.placement, function() {
					isoTest.analyticsLoaded(function(){
						isoTest.chall();
					})
				});
			});
		},
		chall : function() {
			var $widget = isoTest.getVariables();
			$widget.prependTo(isoTest.placement);

			$('#outer-box .overlay-a').on('click', function(){
				isoTest.showReviews();
			});

			$("#modal.reviews-modal p.closer, #mask.reviews-modal, .reviews-modal a.close").on("click", function() {
				isoTest.hideReviews();
			});
		},
		getVariables: function() {
			var $obj = $(isoTest.template);
			var reputationUrl, cityName;
			reputationUrl = isoTest.reputation.loc_url + _a.groupBranch;

			cityName = _a.locationName;

			$obj.find('.location-name').text(cityName);
			$obj.find('#reputation').attr('src', reputationUrl);

			return $obj;
		},
		showReviews: function() {
			$('#modal, #mask, #modal-outer').addClass('reviews-modal');
			$('#modal.reviews-modal, #mask.reviews-modal, #modal-outer.reviews-modal').show();

			if($('#modal.reviews-modal .content #review-iframe-container').length <= 0){
				isoTest.reviewWidget();
				$('#modal.reviews-modal .contentPar.parsys').css('display', 'none');
			}
		},
		hideReviews : function() {
			$('#modal, #mask, #modal-outer').removeClass('reviews-modal');
		},
		reviewWidget : function() {
			var $widgetReview = isoTest.getiFrame();
			$widgetReview.prependTo(isoTest.modalPlacement);
		},
		getiFrame: function() {
			var $rep = $(isoTest.modalContent);
			var reviewUrl;
			reviewUrl = isoTest.reputation.review_url + _a.groupBranch;
			$rep.find('#review-iframe').attr('src', reviewUrl);

			return $rep;
		},
		setTargetCookie : function (test, creative) {
			if (test && creative) {
				_satellite.setCookie('tt_info', test + '|' + creative);
			}
		},
		setTrackingCookie : function(page) {
			_satellite.setCookies('tt_review', page);
		},
		trackClicks : function(element, url) {
			var url = url || null;
			//mboxUpdate(isoTest.customMbox, 'click='+element);
		      adobe.target.trackEvent({
		          "mbox": isoTest.customMbox,
		          "params": {
		              "click": element
		          },
					"success" : function() {
						if (url !== null) {
							window.location.href=url;
						}
					}
		      });
		},
		analyticsLoaded: function(callback){
			isoTest.log('analyticsLoaded - Checking...');
			var aTimer;
			window.clearTimeout(aTimer);
			if (_a && _a.stationId.length > 0) {
				if (typeof callback === 'function') {
					isoTest.log('analyticsLoaded - Found!');
					callback();
				}
	        } else {
	            aTimer = window.setTimeout(function(){isoTest.analyticsLoaded(callback);}, 100);
	        }

		},
		elementLoaded : function (ele, callback) {
			isoTest.log('elementLoaded::  ' + ele + " - Checking...");
			window.clearTimeout(isoTest.eleTimer);
			if (document.querySelectorAll(ele).length > 0) {
				if (typeof callback === 'function') {
					isoTest.log('elementLoaded::  ' + ele + " - Found!");
					callback();
				}
	        } else {
	            isoTest.eleTimer = window.setTimeout(function(){isoTest.elementLoaded(ele, callback);}, 100);
	        }
		},
		dependsLoaded : function (callback) { 
				isoTest.log(isoTest.test + " - " + isoTest.creative + " - dependsLoaded - Start...");
				
				window.clearTimeout(isoTest.timer);
				//Check for jQuery and _a object
				if ((window.$ && $.isReady) || (window.jQuery && jQuery.isReady)) {
					if (typeof callback === "function") {
						
						isoTest.log(isoTest.test + " - " + isoTest.creative + " - dependsLoaded - Ready!");
						
						callback();
					}
				} else {
					isoTest.timer = window.setTimeout(function() {
						isoTest.dependsLoaded(callback);
					}, 100);
				}
			},
		log : function(obj){
			if(isoTest.debug === true){
				console.log(obj);
			}
		}
		
	}

	var helpers = {
		getQueryParam: function(variable) {
	      var query = window.location.search.substring(1);
	      var vars = query.split('&');
	      for (var i = 0; i < vars.length; i++) {
	        var pair = vars[i].split('=');
	        if (decodeURIComponent(pair[0]) == variable) {
	        	return decodeURIComponent(pair[1]);
	        }
	      }
	    }
	}

	isoTest.dependsLoaded(function(){ 
		 isoTest.init();
		});
})();
</script>