<style>
.location-item {
    position: relative;
}

.location-item span.location-item__count {
    background: none !important;
    color: #5c5c5c;
    position: relative;
    top: -6px;
    display: flex !important;
    flex-direction: column;
}

.location-item:before {
    content: '';
    height: 100%;
    width: 10px;
    position: absolute;
}

.location-item:not(.location-item--closed):before {
    background: #169a5a;
}

.location-item.location-item--closed:before {
    background: #5c5c5c;
}

.location-item.iso-selected:not(.location-item--closed):before {
    content: '';
    height: 100%;
    width: 50px !important;
    background: #006639;
}

.location-item.iso-selected:not(.location-item--closed) span.location-item__count:before {
    content: '';
    position: absolute;
    width: 0px;
    height: 0px;
    border-top: 6px solid transparent;
    border-bottom: 6px solid transparent;
    border-left: 6px solid #006639;
    left: 50px;
    top: 33px;
}

.location-item.iso-selected:not(.location-item--closed) .location-item__count {
    color: #fff !important;
}



.location-error {
    left: 0;
    width: 100%;
    z-index: 999;
    position: absolute !important;
    background: #e6e6e6 !important;
}

.location-item--closed:not(.location-item--active) .location-error {
    bottom: 0px;
}

.location-item--closed.location-item--active .location-error+div[id^="locationDetails"] {
    margin-top: 48px;
}

.location-error:before {
    border-bottom-color: #e6e6e6 !important;
    top: -15px !important;
}

.location-item--closed .location-item__wrapper {
    padding-bottom: 30px;
}

i.location-item__icon.icon {
    position: absolute;
    order: 1;
    top: 58px;
    left: 6px;
}


.iso-icon-container {
    left: 3px;
}

.location-item--closed.location-item--highlight .location-item__cta-wrapper .btn {
    background: #fff !important;
}

.location-item--highlight i.location-item__icon.icon,
.iso-selected:not(.location-item--closed) i.location-item__icon.icon {
    filter: invert(98%) sepia(1%) saturate(0%) hue-rotate(164deg) brightness(103%) contrast(103%);
}

.location-item.iso-selected:not(.location-item--closed) span.location-item__count.iso-icon-container:before {
    left: 47px;
}

@media screen and (min-width: 769px) {

    .location-item.location-item--highlight:before {
        content: '';
        height: 100%;
        width: 50px;
    }

    .location-item.location-item--highlight .location-item__count {
        color: #fff !important;
    }

    .location-item.location-item--highlight:not(.location-item--closed) .location-item__wrapper::before {
        content: '';
        position: absolute;
        width: 100%;
        height: 3px;
        background: #169a5a;
        left: 0;
    }

    .location-item.location-item--highlight:not(.location-item--closed) .location-item__wrapper::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 3px;
        background: #169a5a;
        left: 0;
        bottom: 0px;
    }

    .location-item.location-item--highlight:not(.location-item--closed) .location-item__content::after {
        content: '';
        position: absolute;
        width: 3px;
        height: 100%;
        background: #169a5a;
        right: 0;
        z-index: 99999;
        top: 0;
    }

    .location-item.location-item--closed.location-item--highlight .location-item__wrapper::before {
        content: '';
        position: absolute;
        width: 100%;
        height: 3px;
        background: #5c5c5c;
        left: 0;
    }

    .location-item.location-item--closed.location-item--highlight .location-item__wrapper::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 3px;
        background: #5c5c5c;
        left: 0;
        bottom: 0px;
    }

    .location-item.location-item--closed.location-item--highlight .location-item__content::after {
        content: '';
        position: absolute;
        width: 3px;
        height: 100%;
        background: #5c5c5c;
        right: 0;
        z-index: 99999;
        top: 0;
    }

    .location-item.location-item--closed.location-item--highlight .location-error {
        bottom: 3px !important;
    }

    .iso-selected.location-item--highlight:not(.location-item--closed) .location-item__wrapper::before {
        content: none !important;
    }

    .iso-selected.location-item--highlight:not(.location-item--closed) .location-item__wrapper::after {
        content: none !important;
    }

    .iso-selected.location-item--highlight:not(.location-item--closed) .location-item__content::after {
        content: none !important;
    }


}

@media screen and (max-width: 768px) {
    span.location-item__count {
        display: block !important;
    }

    .location-item__cta-wrapper {
        width: 100% !important;
    }

    .location-item__cta-wrapper button {
        min-width: 100% !important;
        width: 100% !important;
    }

    .location-error:before {
        left: 54% !important;
    }

    .location-item.location-item--highlight:before,
    .location-item.iso-selected:before {
        content: '';
        height: 100%;
        width: 50px !important;
    }

    .location-item.location-item--highlight:not(.location-item--closed):before,
    .location-item.iso-selected:not(.location-item--closed):before {
        background: #006639;
    }

    .location-item.location-item--highlight.location-item--closed:before,
    .location-item.iso-selected.location-item--closed:before {
        background: #5c5c5c;
    }

    .location-item.location-item--highlight span.location-item__count:before,
    .location-item.iso-selected span.location-item__count:before {
        content: '';
        position: absolute;
        width: 0px;
        height: 0px;
        border-top: 6px solid transparent;
        border-bottom: 6px solid transparent;
        left: 50px;
        top: 33px;
    }

    .location-item span.location-item__count.iso-icon-container:before {
        left: 47px !important;
    }

    .location-item.location-item--highlight:not(.location-item--closed) span.location-item__count:before,
    .location-item.iso-selected:not(.location-item--closed) span.location-item__count:before {
        border-left: 6px solid #006639;
    }

    .location-item.location-item--highlight.location-item--closed span.location-item__count:before,
    .location-item.iso-selected.location-item--closed span.location-item__count:before {
        border-left: 6px solid #5c5c5c;

    }

    .location-item.location-item--highlight .location-item__count,
    .location-item.iso-selected .location-item__count {
        color: #fff !important;
    }

    .location-item.location-item--highlight:not(.location-item--closed) .location-item__cta,
    .location-item.iso-selected:not(.location-item--closed) .location-item__cta {
        background: #006639;
    }

    .location-item.location-item--highlight {
        background: #fff !important;
    }

    .location-error .location-error__action-header::after {
        content: '';
        position: absolute;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='11' height='11' viewBox='0 0 11 11'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23181918'%3E%3Cg%3E%3Cg%3E%3Cpath d='M5.5 6.125L9.625 2 11 3.375 5.5 8.875 0 3.375 1.375 2z' transform='translate(-349 -957) translate(0 749) translate(349 208)'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A");
        width: 11px;
        height: 12px;
        right: 15px;
        top: 12px;
    }

    .location-error.location-error--expanded .location-error__action-header::after {
        transform: rotate(180deg)
    }

    .location-error .location-error__action-header {
        width: 100%;
    }
}

@media (min-width: 1529px){
    .location-item--closed.location-item--active .location-error {
        left: 1.3%;
        width: 98.7%;
    }


}

@media (min-width: 1395px) and (max-width: 1528px){
    .location-item--closed.location-item--active .location-error {
        left: 1.4%;
        width: 98.6%;
    }


}

@media (min-width: 1311px) and (max-width: 1394px){
    .location-item--closed.location-item--active .location-error {
        left: 1.5%;
        width: 98.6%;
    }


}

@media (min-width: 1193px) and (max-width: 1310px) {
    .location-item--closed.location-item--active .location-error {
        left: 1.6%;
        width: 98.5%;
    }
}

@media (min-width: 1124px) and (max-width: 1192px) {
    .location-item--closed.location-item--active .location-error {
        left: 1.7%;
        width: 98.4%;
    }
}

@media (min-width: 1062px) and (max-width: 1123px) {
    .location-item--closed.location-item--active .location-error {
        left: 1.8%;
        width: 98.3%;
    }
}

@media (min-width: 1006px) and (max-width: 1061px) {
    .location-item--closed.location-item--active .location-error {
        left: 1.9%;
        width: 98.2%;
    }
}

@media (min-width: 954px) and (max-width: 1005px) {
    .location-item--closed.location-item--active .location-error {
        left: 2%;
        width: 98.1%;
    }
}


@media (min-width: 909px) and (max-width: 953px) {
    .location-item--closed.location-item--active .location-error {
        left: 2.1%;
        width: 98%;
    }
}

@media (min-width: 872px) and (max-width: 908px) {
    .location-item--closed.location-item--active .location-error {
        left: 2.2%;
        width: 97.9%;
    }
}

@media (min-width: 832px) and (max-width: 871px) {
    .location-item--closed.location-item--active .location-error {
        left: 2.3%;
        width: 97.8%;
    }
}

@media (min-width: 797px) and (max-width: 831px) {
    .location-item--closed.location-item--active .location-error {
        left: 2.4%;
        width: 97.7%;
    }
}


@media (min-width: 769px) and (max-width: 796px) {
    .location-item--closed.location-item--active .location-error {
        left: 2.5%;
        width: 97.6%;
    }
}

@media (min-width: 733px) and (max-width: 768px) {
    .location-item--closed.location-item--active .location-error {
        left: 1.3%;
        width: 98.7%;
    }
}

@media (min-width: 681px) and (max-width: 732px) {
    .location-item--closed.location-item--active .location-error {
        left: 1.4%;
        width: 98.6%;
    }
}

@media (min-width: 634px) and (max-width: 680px) {
    .location-item--closed.location-item--active .location-error {
        left: 1.5%;
        width: 98.5%;
    }
}

@media (min-width: 605px) and (max-width: 633px) {
    .location-item--closed.location-item--active .location-error {
        left: 1.6%;
        width: 98.4%;
    }
}

@media (min-width: 561px) and (max-width: 604px) {
    .location-item--closed.location-item--active .location-error {
        left: 1.7%;
        width: 98.3%;
    }
}

@media (min-width: 529px) and (max-width: 560px) {
    .location-item--closed.location-item--active .location-error {
        left: 1.8%;
        width: 98.2%;
    }
}

@media (min-width: 502px) and (max-width: 528px) {
    .location-item--closed.location-item--active .location-error {
        left: 1.9%;
        width: 98.1%;
    }
}

@media (min-width: 475px) and (max-width: 501px) {
    .location-item--closed.location-item--active .location-error {
        left: 2%;
        width: 98%;
    }
}

@media (min-width: 453px) and (max-width: 474px) {
    .location-item--closed.location-item--active .location-error {
        left: 2.1%;
        width: 97.9%;
    }
}

@media (min-width: 433px) and (max-width: 452px) {
    .location-item--closed.location-item--active .location-error {
        left: 2.2%;
        width: 97.8%;
    }
}

@media (min-width: 416px) and (max-width: 432px) {
    .location-item--closed.location-item--active .location-error {
        left: 2.3%;
        width: 97.7%;
    }
}

@media (min-width: 396px) and (max-width: 415px) {
    .location-item--closed.location-item--active .location-error {
        left: 2.4%;
        width: 97.6%;
    }
}

@media (min-width: 381px) and (max-width: 395px) {
    .location-item--closed.location-item--active .location-error {
        left: 2.5%;
        width: 97.5%;
    }
}

@media (min-width: 374px) and (max-width: 380px) {
    .location-item--closed.location-item--active .location-error {
        left: 2.6%;
        width: 97.4%;
    }
}

@media (min-width: 352px) and (max-width: 373px) {
    .location-item--closed.location-item--active .location-error {
        left: 2.7%;
        width: 97.3%;
    }
}

@media (min-width: 340px) and (max-width: 351px) {
    .location-item--closed.location-item--active .location-error {
        left: 2.8%;
        width: 97.2%;
    }
}

@media (min-width: 328px) and (max-width: 339px) {
    .location-item--closed.location-item--active .location-error {
        left: 2.9%;
        width: 97.1%;
    }
}

@media (min-width: 319px) and (max-width: 327px) {
    .location-item--closed.location-item--active .location-error {
        left: 3%;
        width: 97%;
    }
}

@media (min-width: 297px) and (max-width: 318px) {
    .location-item--closed.location-item--active .location-error {
        left: 3.2%;
        width: 96.9%;
    }
}

@media (max-width: 320px) {

    .location-item-details__hours.location-availability .availability-wrapper {
        padding: 7px 10px !important;
    }
}

@media (max-width: 1900px){
.location-error.location-error--left-arrow {left: 0.6% !important;width: 99.4% !important;}    
    
}

@media (max-width: 1440px){
.location-error.location-error--left-arrow {left: 0.7% !important;width: 99.3% !important;}    

}
@media (max-width: 1280px){

.location-error.location-error--left-arrow {left: 0.8% !important;width: 99.2% !important;}    
}

@media (max-width: 1024px){

.location-error.location-error--left-arrow {left: 1% !important;width: 99% !important;}    
}

@media (max-width:768px){
.location-item--active.iso-selected .location-error {
    left:0% !important;
    width:100% !important;
}
}

</style>
<script>

(function() {
    'use strict';
    var isoTest = {
        account: 'EHI',
        portfolio: 'EHI',
        test: 'Location Results Map Interaction',
        creative: 'Challenger 1',
        selector: '.location-item',
        debug: false,
        init: function() {

            // isoTest.debug = $ {user.mvtDebug};

            if (_satellite && typeof _satellite.setVar === 'function' && typeof _satellite.track === 'function') {
                _satellite.setVar('TargetCampaign', isoTest.test);
                _satellite.setVar('TargetCreative', isoTest.creative);
                //_satellite.track('target_variables');
            }

            isoTest.log('Test Running...');
            isoTest.log(isoTest.account + ' - ' + isoTest.portfolio);
            isoTest.log(isoTest.test + ' - ' + isoTest.creative);

            helpers.elementLoaded(isoTest.selector, function() {
                isoTest.log('Test Ready!');
                isoTest.chall();
            });

            window.addEventListener('hashchange', isoTest.viewChange, false);

        },
        viewChange: function() {
            if (/location/.test(location.hash)) {
                helpers.elementLoaded(isoTest.selector, function() {
                    isoTest.chall();
                });
            }
        },
        chall: function() {
            var timer = setInterval(function() {
                var cards = document.querySelectorAll('.location-item');
                cards.forEach(function(item) {
                    // var card = item.closest('.location-item');
                    var btn = item.querySelector('button.location-item__cta');
                    var icon = item.querySelector('.location-item__icon');

                    if(icon && item.querySelector('.location-item__icon') === null){
                        item.querySelector('.location-item__count').prepend(icon);
                        item.querySelector('.location-item__count').classList.add('iso-icon-container');
                    }
                    if (btn === document.activeElement) {
                        item.classList.add('iso-selected');
                    } else {
                        item.classList.remove('iso-selected');
                    }

                });

                

            });
          

            isoTest.fixCloseAndOpentab();
            window.addEventListener('resize', function(){
                    isoTest.log('resize');
                    isoTest.fixCloseAndOpentab();
            }, false);

        },
        fixCloseAndOpentab: function(){
            isoTest.log('height fixed');
            var cardsClosed = document.querySelectorAll('.location-item.location-item--closed');
                    cardsClosed.forEach(function(item) {
                        var errorLines = item.querySelector('.location-error__content');
                        var errorHeight = item.querySelector('.location-error').clientHeight;

                        var wrapper = item.querySelector('.location-item__wrapper');
                        item.querySelector('.location-item__wrapper').style.paddingBottom = errorHeight + 'px';

                    });
        },
        fireTag: function(element, value) {
            var linkName = value ? value : element.innerText;
            linkName = isoTest.test ? isoTest.test + ' : ' + linkName : linkName;
            s.linkTrackVars = 'eVar20';
            s.eVar20 = linkName;
            s.tl(this, 'o', linkName);
        },
        log: function(obj) {
            if (isoTest.debug === true) {
                console.log(obj);
            }
        }

    };

    var helpers = {
        elementLoaded: function(ele, callback) {
            isoTest.log('elementLoaded::  ' + ele + ' - Checking...');
            window.clearTimeout(isoTest.eleTimer);
            if (document.querySelectorAll(ele).length > 0) {
                if (typeof callback === 'function') {
                    isoTest.log('elementLoaded::  ' + ele + ' - Found!');
                    callback();
                }
            } else {
                isoTest.eleTimer = window.setTimeout(function() { helpers.elementLoaded(ele, callback); }, 100);
            }
        }
    };

    isoTest.init();
})();
</script>