<style>
	.d-dac-banner {
		align-items: center;
		background-color: #fff;
		border: 1px solid #c3c3c3;
		display: inline-flex;
		margin-bottom: 40px;
		padding: 16px 21px;
		width: 100%;
	}
	.d-dac-banner-icon {
		margin-right: 21px;
		min-width: 25px;
	}
	.d-dac-banner p {
		font-size: .9375rem;
		margin-bottom: 0;
	}
</style>
<script>
(function() {
	'use strict';
	var isoTest = {
		account : 'EHI',
		portfolio : 'Enterprise',
		test : 'Review Delivery and Collection Message',
		creative : 'Challenger 0',
		selector : '#commit .aside',
		template : '<div class="d-dac-banner">\
						<div class="d-dac-banner-icon">\
							<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.01 57.86"><defs><style>.cls-1{fill:none;stroke:#000;stroke-linecap:round;stroke-miterlimit:0;stroke-width:3px;}</style></defs><path class="cls-1" d="M35.16,39.12A7.53,7.53,0,0,0,31,37.83a13.76,13.76,0,0,0-6.24,2,1.1,1.1,0,0,1-.53.14c-.9,0-2.45-1-5-5.1"/><path class="cls-1" d="M19.21,34.85c-.67-1.07-1.4-2.36-2.2-3.91-3.33-6.36-4.18-10-2.57-10.84,4.38-2.29,6.47-5.31,3.36-13.27-.89-2.26-2.36-4.71-4.93-5.23-3-.59-7.26,1.49-9.2,3.71-2.22,2.54-2.29,6.75-2.11,9.91.36,6.16,2.57,13.42,6.27,20.47a55.49,55.49,0,0,0,9.84,13.73c3.23,3.21,8.2,7.46,13.07,6.89A11.61,11.61,0,0,0,34.51,55a13.93,13.93,0,0,0,4.58-3.28A6.25,6.25,0,0,0,40,45.1"/><path class="cls-1" d="M42,16A22.4,22.4,0,0,0,33.15,7.9,2.55,2.55,0,1,0,31,12.53a18,18,0,0,1,9.39,15,2.54,2.54,0,0,0,2.49,2.6H43a2.54,2.54,0,0,0,2.54-2.49A22.3,22.3,0,0,0,42,16Z"/><path class="cls-1" d="M25.58,20.3a11.2,11.2,0,0,1,5.49,8.77,2.55,2.55,0,0,0,2.5,2.6h.06a2.55,2.55,0,0,0,2.54-2.49,15.88,15.88,0,0,0-2.48-7.91,16.08,16.08,0,0,0-6-5.6,2.53,2.53,0,0,0-3.37,1.25,2.57,2.57,0,0,0,1.27,3.38Z"/></svg>\
						</div>\
						<p>This location offers delivery and collection. Call the location to arrange. See confirmation email for branch details.</p>\
					</div>',
		init : function() {

			isoTest.debug = ${user.mvtDebug};
			
			if (_satellite && typeof _satellite.setVar === 'function' && typeof _satellite.track === 'function') {
				_satellite.setVar('TargetCampaign', isoTest.test);
				_satellite.setVar('TargetCreative', isoTest.creative);
			}

			isoTest.log('Test Running...');
			isoTest.log(isoTest.account + ' - ' + isoTest.portfolio);
			isoTest.log(isoTest.test + ' - ' + isoTest.creative);

			helpers.elementLoaded(isoTest.selector, function() {
				isoTest.log('Test Ready!');
  				isoTest.chall();
			});
			
		window.addEventListener('hashchange', isoTest.viewChange, false);
		
		},
		viewChange : function(){
			if(/commit/.test(location.hash)){
				helpers.elementLoaded(isoTest.selector, function() {
					isoTest.chall();
				});
			}
		},
		chall : function() {
			helpers.dataLayerLoaded(function() {
				var pickupLocation = ReservationStateTree.get(['session', 'reservationSession', 'pickup_location','id']);
				var pilotLocations = ['1046559', '1004627', '1049692', '1051485', '1004621', '1043400', '1047569', '1004614', '1005942', '1008475', '1005945', '1038605', '1005940'];
				isoTest.log('Pickup Location: ' + pickupLocation);
				if (pilotLocations.indexOf(pickupLocation) !== -1) {
					
					if(!document.querySelector('.d-dac-banner')){
						document.querySelector(isoTest.selector).insertAdjacentHTML('afterbegin',isoTest.template);
					}
					isoTest.resizeLogic();
				}
			});
		},
		resizeLogic : function() {
			var banner = document.querySelector('.d-dac-banner');
			var reviewSection = document.querySelector('.review-section');
			var asideSection = document.querySelector('.aside');
			var mQ = window.matchMedia('(max-width: 748px)');
			
			// Relocate countdown module depending on screen width
			function handleTabletChange(e) {
				if (e.matches) {
					isoTest.log('mQ: W < 748px');
					reviewSection.insertAdjacentElement('afterbegin',banner);
				} else {
					isoTest.log('mQ: W > 748px');
					asideSection.insertAdjacentElement('afterbegin',banner);
				}
			}

			// Register event listener
			mQ.addListener(handleTabletChange);

			// Initial check
			handleTabletChange(mQ);
		},
		log : function(obj){
			if(isoTest.debug === true){
				console.log(obj);
			}
		}

	};

	var helpers = {
		elementLoaded : function (ele, callback) {
			isoTest.log('elementLoaded::  ' + ele + ' - Checking...');
			window.clearTimeout(isoTest.eleTimer);
			if (document.querySelectorAll(ele).length > 0) {
				if (typeof callback === 'function') {
					isoTest.log('elementLoaded::  ' + ele + ' - Found!');
					callback();
				}
	        } else {
	            isoTest.eleTimer = window.setTimeout(function(){helpers.elementLoaded(ele, callback);}, 100);
	        }
		},
		dataLayerLoaded : function (callback) {
			window.clearTimeout(isoTest.eleTimer);
			isoTest.log('dataLayerLoaded:: Checking...');
			if (typeof ReservationStateTree.get(['session', 'reservationSession', 'pickup_location','id']) !== 'undefined') {
				if (typeof callback === 'function') {
					isoTest.log('dataLayerLoaded:: Found!');
					callback();
				}
	        } else {
	            isoTest.eleTimer = window.setTimeout(function(){helpers.dataLayerLoaded(callback);}, 100);
	        }
		}
	};

	isoTest.init();
})();
</script>