<style>
</style>
<script>
(function() {
	'use strict';
	var isoTest = {
		account : 'EHI',
		portfolio : 'Enterprise',
		test : 'MVT-697',
		creative : 'Challenger 1',
		selector : '.sidebar-box .switch-pay-type > button',
        templatePayNow:  `<div class="sidebar-box mvt-697-value-prop"> <div class="value-prop-header"> <h2>Why Choose Enterprise?</h2> </div><div class="value-prop-info"> <p class="value-prop"><i class="value-prop-icon"></i>Free Cancellation</p><p class="value-prop"><i class="value-prop-icon"></i>Pay Now</p><p class="value-prop"><i class="value-prop-icon"></i>Unlimited Mileage</p></div></div>`,
        templatePayLater: `<div class="sidebar-box mvt-697-value-prop"> <div class="value-prop-header"> <h2>Why Choose Enterprise?</h2> </div><div class="value-prop-info"> <p class="value-prop"><i class="value-prop-icon"></i>Free Cancellation</p><p class="value-prop"><i class="value-prop-icon"></i>Pay at Pickup</p><p class="value-prop"><i class="value-prop-icon"></i>Unlimited Mileage</p></div></div>`,
		init : function() {

			isoTest.debug =true;
			
			if (_satellite && typeof _satellite.setVar === 'function' && typeof _satellite.track === 'function') {
				_satellite.setVar('TargetCampaign', isoTest.test);
				_satellite.setVar('TargetCreative', isoTest.creative);
			}

			isoTest.log('Test Running...');
			isoTest.log(isoTest.account + ' - ' + isoTest.portfolio);
			isoTest.log(isoTest.test + ' - ' + isoTest.creative);

			isoTest.observeEl(isoTest.selector, function(ele) {
				isoTest.log('Test Ready!');   
  				isoTest.chall();
			});
			
		},
		chall: function(){
           
           var mainContainer = document.querySelectorAll(isoTest.selector);
		   isoTest.updateHTML(mainContainer);
		   
        },
		updateHTML: function(ele) {
			console.log('changes made', ele);
			isoTest.removeHTML();
			ele.forEach(item => {
				var sideBox = item.parentElement.parentElement.parentElement;
				console.log(item.getAttribute('id'));
				item.getAttribute('id') == 'payLaterToggle' ? sideBox.insertAdjacentHTML("afterend",  isoTest.templatePayNow): sideBox.insertAdjacentHTML("afterend", isoTest.templatePayLater);  
           
			});
			
		},
		removeHTML: function() {
			var removeItem = document.querySelectorAll('.mvt-697-value-prop');
			if(removeItem) {
				removeItem.forEach(e => {
					console.log(e)
					e.remove();
				});
			}
		},
       
		fireTag : function(element, value) {
			var linkName = value ? value : element.innerText;
				linkName = isoTest.test ? isoTest.test + ' : ' + linkName : linkName;
			s.linkTrackVars = 'eVar20';
			s.eVar20 = linkName;
			s.tl(this, 'o', linkName);
		},
		log : function(obj){
			if(isoTest.debug === true){
				console.log(obj);
			}
		},
		observeEl: function (selector, callback) {
                  var processed = new Map, processElement = function (e) { processed && !processed.has(e) && (processed.set(e, !0), callback(e)) }, lookForSelector = function () { var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : document; if (e.matches && e.matches(selector) && processElement(e)) return !0; if (e.querySelectorAll) { var r = e.querySelectorAll(selector); if (r.length) for (var o = 0; o < r.length; o++) { var t = r[o]; if (processElement(t)) return !0 } } }; lookForSelector(); var obs = new MutationObserver(function (e) { e.forEach(function (e) { if (e && e.addedNodes && e.addedNodes.length) for (var r = 0; r < e.addedNodes.length; r++) { var o = e.addedNodes[r].parentElement; if (o && lookForSelector(o)) return !0 } }) }); obs.observe(document, { attributes: !1, childList: !0, subtree: !0 });
        },

	};
	isoTest.init();
})();
</script>
