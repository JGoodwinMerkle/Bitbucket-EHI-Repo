<style>
.ReactModalPortal .modal-content {
	overflow-x: hidden;
}
.ReactModalPortal #modal-content {
	position: relative;
}
.iso-mm {
	background: #fff;
    top: 50px;
    right: 0;
    bottom: 0;
    left: 100%;
    overflow: hidden;
    position: absolute;
    transition: left 0.5s ease-in-out;
    z-index: 1;
}
.ifa-wrap {
	position: relative;
}
.iso-filters-active {
	border-bottom: 1px solid #cecece;
	display: block;
	overflow: scroll;
	padding: 0 1.25rem;
	white-space: nowrap;
	-ms-overflow-style: none;  /* Internet Explorer 10+ */
	scrollbar-width: none;  /* Firefox */
}
.iso-filters-active::-webkit-scrollbar { 
    display: none;  /* Safari and Chrome */
}
.iso-filters-active::after {
	content: '';
	background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 80%, rgba(255,255,255,1) 100%);
	height: 51px;
	pointer-events: none;
	position: absolute;
	right: 0;
	width: 50px;
}
.iso-filters-active > a, .ifa-mm > a {
	border: 2px solid #169a5a;
	border-radius: 20px;
	cursor: pointer;
	color: #169a5a;
	display: inline-block;
	font-weight: 500;
	margin: 0 1rem 1rem 0;
    padding: 5px 30px 5px 10px;
    position: relative;
    text-transform: uppercase;
}
.iso-filters-active > a::after, .ifa-mm > a::after {
	content: '+';
    font-size: 40px;
    font-weight: 300;
    transform: rotate(45deg);
    position: absolute;
    top: -10px;
    right: 7px;
}
.ifa-mm > a {
	margin: 1rem 1rem 0 0;
}
.ifa-mm {
	cursor: auto;
	display: block;
} 
.iso-mm-active .iso-mm {
	left: 0;
}
.iso-mm-back {
	cursor: pointer;
	display: inline-block;
	font-size: 14px;
	font-weight: 600;
	margin: 1.25rem 0 1rem 1.25rem;
	padding-left: 20px;
	position: relative;
	text-transform: uppercase;
}
.iso-mm-back::before {
	background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNC45IDE0LjciPjxwYXRoIGQ9Im0xNC4zIDQuOC0xLjItMS4yYy0uMi0uMi0uNC0uMi0uNiAwbC01IDUuMS01LjItNS4xYy0uMi0uMi0uNC0uMi0uNiAwTC42IDQuOGMtLjIuMi0uMi40IDAgLjZsNS4zIDUuM3MwIC4xLjEuMUw3LjIgMTJjLjIuMi40LjIuNiAwTDkgMTAuOGw1LjQtNS40Yy4xLS4yLjEtLjQtLjEtLjZ6IiBzdHlsZT0iZmlsbDojMTY5YTVhIi8+PC9zdmc+);
	background-size: 100%;
	content: '';
    position: absolute;
    left: 0;
    height: 16px;
    width: 16px;
    transform: rotate(90deg);
    top: 1px;
}
.vehicle-filter--alternative .vehicle-filter__list-content {
	left: 100%;
	padding: 0 1.25rem;
	position: absolute;
	top: 0;
	transition: left 0.5s ease-in-out;
	width: 100%;
	z-index: 2;
}
.iso-mm-active .iso-cte-expanded .vehicle-filter__list-content {
	left: 0;
}
.vehicle-filter--alternative .vehicle-filter__filter {
	cursor: pointer;
}
.vehicle-filter--alternative .vehicle-filter__filter-header {
	margin-bottom: 0;
}
.vehicle-filter--alternative .vehicle-filter__filter-header .vehicle-filter__price-indicator {
	display: none;
}
.iso-cte-collapsed .vehicle-filter__filter-header::after {
	background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNC45IDE0LjciPjxwYXRoIGQ9Im0xNC4zIDQuOC0xLjItMS4yYy0uMi0uMi0uNC0uMi0uNiAwbC01IDUuMS01LjItNS4xYy0uMi0uMi0uNC0uMi0uNiAwTC42IDQuOGMtLjIuMi0uMi40IDAgLjZsNS4zIDUuM3MwIC4xLjEuMUw3LjIgMTJjLjIuMi40LjIuNiAwTDkgMTAuOGw1LjQtNS40Yy4xLS4yLjEtLjQtLjEtLjZ6IiBzdHlsZT0iZmlsbDojMTY5YTVhIi8+PC9zdmc+);
	background-size: 100%;
	content: '';
	position: absolute;
	right: 1.25rem;
	height: 20px;
	width: 20px;
	transform: rotate(-90deg);
}
.iso-cte-expanded .vehicle-filter__filter-header::after {
	background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNC45IDE0LjciPjxwYXRoIGQ9Im0xNC4zIDQuOC0xLjItMS4yYy0uMi0uMi0uNC0uMi0uNiAwbC01IDUuMS01LjItNS4xYy0uMi0uMi0uNC0uMi0uNiAwTC42IDQuOGMtLjIuMi0uMi40IDAgLjZsNS4zIDUuM3MwIC4xLjEuMUw3LjIgMTJjLjIuMi40LjIuNiAwTDkgMTAuOGw1LjQtNS40Yy4xLS4yLjEtLjQtLjEtLjZ6IiBzdHlsZT0iZmlsbDojMTY5YTVhIi8+PC9zdmc+);
	background-size: 100%;
	content: '';
	position: absolute;
	right: 1.25rem;
	height: 20px;
	width: 20px;
	transform: rotate(90deg);
}
.vehicle-filter--alternative:nth-of-type(2) .vehicle-filter__filter:last-child {
	border-bottom: 1px solid #c3c3c3;
}
</style>
<script>
(function() {
	'use strict';
	var isoTest = {
		account : 'EHI',
		portfolio : 'Enterprise',
		test : 'Vehicle Selection Filters Redesign 3.0',
		creative : 'Challenger 3',
		selector : '.ReactModalPortal',
		init : function() {

			isoTest.debug = ${user.mvtDebug};
			
			if (_satellite && typeof _satellite.setVar === 'function' && typeof _satellite.track === 'function') {
				_satellite.setVar('TargetCampaign', isoTest.test);
				_satellite.setVar('TargetCreative', isoTest.creative);
			}

			isoTest.log('Test Running...');
			isoTest.log(isoTest.account + ' - ' + isoTest.portfolio);
			isoTest.log(isoTest.test + ' - ' + isoTest.creative);

			helpers.elementLoaded(isoTest.selector, function() {
				isoTest.log('Test Ready!');
  				isoTest.chall();
			});
			
		window.addEventListener('hashchange', isoTest.viewChange, false);
		
		},
		viewChange : function(){
			if(/cars/.test(location.hash)){
				helpers.elementLoaded(isoTest.selector, function() {
					isoTest.chall();
				});
			}
		},
		chall : function() {

			isoTest.events();

			var observer = new MutationObserver(function(mutations) {
			    mutations.forEach(function(mutation) {
			    	if ($('.vehicle-filter--alternative:nth-of-type(2) .vehicle-filter__filter-header')) {
			    		if (!$('.iso-filters-active')) {
			    						    			
			    			$('#modal-content').insertAdjacentHTML('beforeend','<div class="iso-mm"><a class="iso-mm-back">Back to Sort & Filter</a><div class="ifa-wrap"><div class="iso-filters-active"></div></div></div>');
			    			
				    		var filterWrap = $$('.vehicle-filter--alternative:nth-of-type(2) .vehicle-filter__filter');
			    			filterWrap[0].classList.add('iso-cte-collapsed');
			    			filterWrap[1].classList.add('iso-cte-collapsed');
			    			filterWrap[2].classList.add('iso-cte-collapsed');

						    var filterHeaders = $$('.vehicle-filter--alternative:nth-of-type(2) .vehicle-filter__filter-header');
						    filterHeaders[0].insertAdjacentHTML('afterend','<div class="ifa-mm ifa-mm-mileage"></div>');
						    filterHeaders[1].insertAdjacentHTML('afterend','<div class="ifa-mm ifa-mm-vehicle"></div>');
						    filterHeaders[2].insertAdjacentHTML('afterend','<div class="ifa-mm ifa-mm-passeng"></div>');

						    isoTest.filterCheck();
							
			    		}
			    		isoTest.filterCheck();
			    	}
			    });
			});
			observer.observe($('.ReactModalPortal'), {childList: true, subtree: true });

		},
		filterCheck: function() {
			if ($('[value="Unlimited Mileage"]:checked')) {
				if (!$('.ifa-unlimited')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-unlimited">Unlimited Mileage</a>');
					$('.ifa-mm-mileage').insertAdjacentHTML('beforeend','<a class="ifa-unlimited">Unlimited Mileage</a>');
				}
			} else if ($('[value="Unlimited Mileage"]:not(:checked)')) {
				if ($('.ifa-unlimited')) {
					$('.ifa-unlimited').remove(); 
				}
			}
			if ($('[value="Limited Mileage"]:checked')) {
				if (!$('.ifa-limited')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-limited">Limited Mileage</a>');
					$('.ifa-mm-mileage').insertAdjacentHTML('beforeend','<a class="ifa-limited">Limited Mileage</a>');
				}
			} else if ($('[value="Limited Mileage"]:not(:checked)')) {
				if ($('.ifa-limited')) {
					$('.ifa-limited').remove();
				}
			}
			if ($('[value="Cars"]:checked')) {
				if (!$('.ifa-cars')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-cars">Cars</a>');
					$('.ifa-mm-vehicle').insertAdjacentHTML('beforeend','<a class="ifa-cars">Cars</a>');
				}
			} else if ($('[value="Cars"]:not(:checked)')) {
				if ($('.ifa-cars')) {
					$('.ifa-cars').remove();
				}
			}
			if ($('[value="SUVs"]:checked')) {
				if (!$('.ifa-suvs')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-suvs">SUVs</a>');
					$('.ifa-mm-vehicle').insertAdjacentHTML('beforeend','<a class="ifa-suvs">SUVs</a>');
				}
			} else if ($('[value="SUVs"]:not(:checked)')) {
				if ($('.ifa-suvs')) {
					$('.ifa-suvs').remove();
				}
			}
			if ($('[value="Trucks"]:checked')) {
				if (!$('.ifa-trucks')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-trucks">Trucks</a>');
					$('.ifa-mm-vehicle').insertAdjacentHTML('beforeend','<a class="ifa-trucks">Trucks</a>');
				}
			} else if ($('[value="Trucks"]:not(:checked)')) {
				if ($('.ifa-trucks')) {
					$('.ifa-trucks').remove();
				}
			}
			if ($('[value="Vans"]:checked')) {
				if (!$('.ifa-vans')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-vans">Vans</a>');
					$('.ifa-mm-vehicle').insertAdjacentHTML('beforeend','<a class="ifa-vans">Vans</a>');
				}
			} else if ($('[value="Vans"]:not(:checked)')) {
				if ($('.ifa-vans')) {
					$('.ifa-vans').remove();
				}
			}
			if ($('[value="2"]:checked')) {
				if (!$('.ifa-2')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-2">2+ Passengers</a>');
					$('.ifa-mm-passeng').insertAdjacentHTML('beforeend','<a class="ifa-2">2+ Passengers</a>');
				}
			} else if ($('[value="2"]:not(:checked)')) {
				if ($('.ifa-2')) {
					$('.ifa-2').remove();
				}
			}
			if ($('[value="4"]:checked')) {
				if (!$('.ifa-4')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-4">4+ Passengers</a>');
					$('.ifa-mm-passeng').insertAdjacentHTML('beforeend','<a class="ifa-4">4+ Passengers</a>');
				}
			} else if ($('[value="4"]:not(:checked)')) {
				if ($('.ifa-4')) {
					$('.ifa-4').remove();
				}
			}
			if ($('[value="5"]:checked')) {
				if (!$('.ifa-5')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-5">5+ Passengers</a>');
					$('.ifa-mm-passeng').insertAdjacentHTML('beforeend','<a class="ifa-5">5+ Passengers</a>');
				}
			} else if ($('[value="5"]:not(:checked)')) {
				if ($('.ifa-5')) {
					$('.ifa-5').remove();
				}
			}
			if ($('[value="7"]:checked')) {
				if (!$('.ifa-7')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-7">7+ Passengers</a>');
					$('.ifa-mm-passeng').insertAdjacentHTML('beforeend','<a class="ifa-7">7+ Passengers</a>');
				}
			} else if ($('[value="7"]:not(:checked)')) {
				if ($('.ifa-7')) {
					$('.ifa-7').remove();
				}
			}
			if ($('[value="8"]:checked')) {
				if (!$('.ifa-8')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-8">8+ Passengers</a>');
					$('.ifa-mm-passeng').insertAdjacentHTML('beforeend','<a class="ifa-8">8+ Passengers</a>');
				}
			} else if ($('[value="8"]:not(:checked)')) {
				if ($('.ifa-8')) {
					$('.ifa-8').remove();
				}
			}
			if ($('[value="12"]:checked')) {
				if (!$('.ifa-12')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-12">12+ Passengers</a>');
					$('.ifa-mm-passeng').insertAdjacentHTML('beforeend','<a class="ifa-12">12+ Passengers</a>');
				}
			} else if ($('[value="12"]:not(:checked)')) {
				if ($('.ifa-12')) {
					$('.ifa-12').remove();
				}
			}
			if ($('[value="15"]:checked')) {
				if (!$('.ifa-15')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-15">15+ Passengers</a>');
					$('.ifa-mm-passeng').insertAdjacentHTML('beforeend','<a class="ifa-15">15+ Passengers</a>');
				}
			} else if ($('[value="15"]:not(:checked)')) {
				if ($('.ifa-15')) {
					$('.ifa-15').remove();
				}
			}
		},
		events: function() {
			document.addEventListener('click', function (event) {

				if (event.target.matches('.iso-cte-collapsed') || event.target.closest('.vehicle-filter__filter-header')) {
					event.target.closest('.iso-cte-collapsed').classList.add('iso-cte-expanded');
					event.target.closest('.iso-cte-collapsed').classList.remove('iso-cte-collapsed');
					$('#modal-content').classList.add('iso-mm-active');

					// Filter title
					if (event.target.closest('.vehicle-filter--alternative:nth-of-type(2) .vehicle-filter__filter:nth-of-type(2)')) {
						$('.vehicle-filter--alternative:nth-of-type(1) .vehicle-filter__header-title').innerText = 'Mileage';
						isoTest.fireTag89('','Filter Type: Mileage Open');
					} else
					if (event.target.closest('.vehicle-filter--alternative:nth-of-type(2) .vehicle-filter__filter:nth-of-type(3)')) {
						$('.vehicle-filter--alternative:nth-of-type(1) .vehicle-filter__header-title').innerText = 'Vehicle Type';
						isoTest.fireTag89('','Filter Type: Vehicle Type Open');
					} else
					if (event.target.closest('.vehicle-filter--alternative:nth-of-type(2) .vehicle-filter__filter:nth-of-type(4)')) {
						$('.vehicle-filter--alternative:nth-of-type(1) .vehicle-filter__header-title').innerText = 'Passengers';
						isoTest.fireTag89('','Filter Type: Passengers Open');
					}
				} 

				// Back to sort
				if (event.target.matches('.iso-mm-back')) {
					$('.iso-mm-active').classList.remove('iso-mm-active');
					$('.iso-cte-expanded').classList.add('iso-cte-collapsed');
					$('.iso-cte-expanded').classList.remove('iso-cte-expanded');
					$('.vehicle-filter--alternative:nth-of-type(1) .vehicle-filter__header-title').innerText = 'Sort';
					isoTest.fireTag89('','Filter Type: Close');
				}

				// Bubble removal
				if (event.target.closest('.ifa-unlimited')) {
					$('.vehicle-filter--alternative [value="Unlimited Mileage"]').click();
					isoTest.fireTag89('','Unlimited Bubble Removed');
				} else
				if (event.target.closest('.ifa-limited')) {
					$('.vehicle-filter--alternative [value="Limited Mileage"]').click();
					isoTest.fireTag89('','Limited Bubble Removed');
				} else
				if (event.target.closest('.ifa-suvs')) {
					$('.vehicle-filter--alternative [value="SUVs"]').click();
					isoTest.fireTag89('','SUVs Bubble Removed');
				} else
				if (event.target.closest('.ifa-cars')) {
					$('.vehicle-filter--alternative [value="Cars"]').click();
					isoTest.fireTag89('','Cars Bubble Removed');
				} else
				if (event.target.closest('.ifa-trucks')) {
					$('.vehicle-filter--alternative [value="Trucks"]').click();
					isoTest.fireTag89('','Trucks Bubble Removed');
				} else
				if (event.target.closest('.ifa-vans')) {
					$('.vehicle-filter--alternative [value="Vans"]').click();
					isoTest.fireTag89('','Vans Bubble Removed');
				} else
				if (event.target.closest('.ifa-2')) {
					$('.vehicle-filter--alternative [value="2"]').click();
					isoTest.fireTag89('','2+ Bubble Removed');
				} else
				if (event.target.closest('.ifa-4')) {
					$('.vehicle-filter--alternative [value="4"]').click();
					isoTest.fireTag89('','4+ Bubble Removed');
				} else
				if (event.target.closest('.ifa-5')) {
					$('.vehicle-filter--alternative [value="5"]').click();
					isoTest.fireTag89('','5+ Bubble Removed');
				} else
				if (event.target.closest('.ifa-7')) {
					$('.vehicle-filter--alternative [value="7"]').click();
					isoTest.fireTag89('','7+ Bubble Removed');
				} else
				if (event.target.closest('.ifa-8')) {
					$('.vehicle-filter--alternative [value="8"]').click();
					isoTest.fireTag89('','8+ Bubble Removed');
				} else
				if (event.target.closest('.ifa-12')) {
					$('.vehicle-filter--alternative [value="12"]').click();
					isoTest.fireTag89('','12+ Bubble Removed');
				} else
				if (event.target.closest('.ifa-15')) {
					$('.vehicle-filter--alternative [value="15"]').click();
					isoTest.fireTag89('','15+ Bubble Removed');
				}
			}, false);
		},
		fireTag89 : function(element, value) {
			var linkName = value ? value : element.innerText;
				linkName = isoTest.test ? isoTest.test + ' : ' + linkName : linkName;
			s.linkTrackVars = 'eVar20';
			s.eVar20 = linkName;
			s.tl(this, 'o', linkName);
		},
		log : function(obj){
			if(isoTest.debug === true){
				console.log(obj);
			}
		}
	};

	var helpers = {
		elementLoaded : function (ele, callback) {
			isoTest.log('elementLoaded::  ' + ele + ' - Checking...');
			window.clearTimeout(isoTest.eleTimer);
			if (document.querySelectorAll(ele).length > 0) {
				if (typeof callback === 'function') {
					isoTest.log('elementLoaded::  ' + ele + ' - Found!');
					callback();
				}
	        } else {
	            isoTest.eleTimer = window.setTimeout(function(){helpers.elementLoaded(ele, callback);}, 100);
	        }
		},
	};

	var $ = document.querySelector.bind(document);
	var $$ = document.querySelectorAll.bind(document);

	isoTest.init();
})();
</script>