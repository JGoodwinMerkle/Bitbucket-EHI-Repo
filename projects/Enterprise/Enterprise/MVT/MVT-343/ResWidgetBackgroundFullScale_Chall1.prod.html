<script>!function(){"use strict";var n={account:"Enterprise",portfolio:"EHI",test:"Res Widget Background Full Scale",creative:"Challenger 1",selector:".booking-widget-hero .img-container img[src]",debug:!1,init:function(){_satellite&&"function"==typeof _satellite.setVar&&"function"==typeof _satellite.track&&(_satellite.setVar("TargetCampaign",n.test),_satellite.setVar("TargetCreative",n.creative)),n.chall()},defaultRegion:"WEST",cycle:-1,regionBasedStates:{"NORT EAST":["PA","NY","ME","VT","NH","MA","RI","CT","NJ","DE","MD"],WEST:["WA","OR","CA","NV","ID","AZ","UT","NM","CO","MT","WY","AK","HI"],SOUTH:["FL","GA","AL","MS","TN","KY","WV","VA","SC","LA"," TX","OK","AR","SJU"],MIDWEST:["ND","SD","NE","KS","MO","IA","MN","WI","IL","IN","MI","OH"]},locationBasedImages:{"NORT EAST":[{cityName:"city_hero_brooklyn",imageLink:"https://www.enterprise.com/content/dam/ecom/hosted/res-widget-background/east_1.png"},{cityName:"new_hampshire-6",imageLink:"https://www.enterprise.com/content/dam/ecom/hosted/res-widget-background/east_2.png"},{cityName:"times-square-new-york",imageLink:"https://www.enterprise.com/content/dam/ecom/hosted/res-widget-background/east_3.png"}],WEST:[{cityName:"Maui-0147",imageLink:"https://www.enterprise.com/content/dam/ecom/hosted/res-widget-background/west_1.png"},{cityName:"road-trip-Bierstadt-lake-featured-image",imageLink:"https://www.enterprise.com/content/dam/ecom/hosted/res-widget-background/west_2.png"},{cityName:"us-sanfrancisco",imageLink:"https://www.enterprise.com/content/dam/ecom/hosted/res-widget-background/west_3.png"}],SOUTH:[{cityName:"us-ftlauderdale",imageLink:"https://www.enterprise.com/content/dam/ecom/hosted/res-widget-background/south_1.png"},{cityName:"explore-beyond-orlando-clearwater",imageLink:"https://www.enterprise.com/content/dam/ecom/hosted/res-widget-background/south_2.png"},{cityName:"us-atlanta",imageLink:"https://www.enterprise.com/content/dam/ecom/hosted/res-widget-background/south_3.png"}],MIDWEST:[{cityName:"montana_ski_areas_19",imageLink:"https://www.enterprise.com/content/dam/ecom/hosted/res-widget-background/midwest_1.png"},{cityName:"explore-beyond-chicago-skyline",imageLink:"https://www.enterprise.com/content/dam/ecom/hosted/res-widget-background/midwest_2.png"},{cityName:"drives-utah-byway-12-kodachromebasinx",imageLink:"https://www.enterprise.com/content/dam/ecom/hosted/res-widget-background/midwest_3.png"}]},getUserStateRegion:function(e){for(var t=Object.keys(n.regionBasedStates),o=0;o<t.length;o++)if(-1!=n.regionBasedStates[t[o]].indexOf(e))return t[o];return""},getRegionObject:function(e,t,o){return"next"==e?{curr:JSON.parse(window.localStorage.getItem("iso_region")).curr,next:t+"_"+o}:{curr:t+"_"+o,next:""}},swapRegionData:function(){var e=n.getRegionData();e.next.length&&null==this.getUsersSession()&&(e={curr:e.next,next:""},window.localStorage.setItem("iso_region",JSON.stringify(e)))},setRegionData:function(e,t){var o=JSON.parse(window.localStorage.getItem("iso_region"));null!=o?e==o.curr.split("_")[0]?window.localStorage.setItem("iso_region",JSON.stringify(n.getRegionObject("curr",e,o.cycle))):window.localStorage.setItem("iso_region",JSON.stringify(n.getRegionObject("next",e,t))):window.localStorage.setItem("iso_region",JSON.stringify(n.getRegionObject("curr",e,t)))},getRegionData:function(){return JSON.parse(window.localStorage.getItem("iso_region"))},setUsersSession:function(e){window.sessionStorage.setItem("iso_state_image",e)},getUsersSession:function(){return window.sessionStorage.getItem("iso_state_image")},heroImageChangeListener:function(n){var i=document.querySelector(".booking-widget-hero .img-container img");new MutationObserver(function(e,t){for(var o=0;o<e.length;o++)"attributes"==e[o].type&&i.getAttribute("src").indexOf("/hosted/res-widget-background/")<0&&n()}).observe(i,{attributes:!0,childList:!0,subtree:!0})},changeImageHandler:function(e,t){console.log(n.locationBasedImages[e][t]),o.elementLoaded(n.selector,function(){document.querySelector(".booking-widget-hero .img-container img").setAttribute("src",n.locationBasedImages[e][t].imageLink),n.heroImageChangeListener(function(){document.querySelector(".booking-widget-hero .img-container img").setAttribute("src",n.locationBasedImages[e][t].imageLink)})}),this.setUsersSession(!0)},resetCycleHandler:function(e,t){var o=++t;2<o&&(o=0);t=this.getRegionData();return t.curr=e+"_"+o,window.localStorage.setItem("iso_region",JSON.stringify(t)),o},chall:function(){var e,t,o;"/en/reserve.html"==window.location.pathname&&this.waitForEntDatalayer(function(){var e=window.store.getState().toJS().app.baobab.session.gbo.pickup_location.address.country_subdivision_code,e=n.getUserStateRegion(e);n.setRegionData(e,n.cycle)}),"/en/home.html"==window.location.pathname&&(null!=(e=this.getRegionData())?(this.swapRegionData(),t=(e=this.getRegionData()).curr.split("_")[0],o=e.curr.split("_")[1],null==this.getUsersSession()?(o=this.resetCycleHandler(t,o),this.changeImageHandler(t,o)):"true"==this.getUsersSession()?this.changeImageHandler(t,o):"false"==this.getUsersSession()&&this.changeImageHandler(this.defaultRegion,o)):(null==this.getUsersSession()&&(this.setRegionData(this.defaultRegion,this.cycle),o=this.resetCycleHandler(this.defaultRegion,this.cycle),this.changeImageHandler(this.defaultRegion,o)),this.setUsersSession(!1)))},waitForEntDatalayer:function(e){var t=500,o=window.setInterval(function(){window.store&&window.store.getState()&&window.store.getState().toJS()&&window.store.getState().toJS().app&&window.store.getState().toJS().app.baobab&&window.store.getState().toJS().app.baobab.session&&window.store.getState().toJS().app.baobab.session.gbo&&window.store.getState().toJS().app.baobab.session.gbo.pickup_location&&window.store.getState().toJS().app.baobab.session.gbo.pickup_location.address&&window.store.getState().toJS().app.baobab.session.gbo.pickup_location.address.country_subdivision_code?(e(),window.clearInterval(o)):--t<0&&window.clearInterval(o)},50)},fireTag:function(e,t){e=t||e.innerText,e=n.test?n.test+" : "+e:e;s.linkTrackVars="eVar20",s.eVar20=e,s.tl(this,"o",e)},log:function(e){!0===n.debug&&console.log(e)}},o={elementLoaded:function(e,t){window.clearTimeout(n.eleTimer),0<document.querySelectorAll(e).length?"function"==typeof t&&t():n.eleTimer=window.setTimeout(function(){o.elementLoaded(e,t)},100)}};n.init()}()</script>