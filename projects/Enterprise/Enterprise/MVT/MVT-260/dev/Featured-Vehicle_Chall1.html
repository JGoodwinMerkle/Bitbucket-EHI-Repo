<style>
	/* add this to hide tag when outside of designated location */
	.iso-preSelectedClass.iso-hide .rs-callout.rs-callout--highlight {
		display: none;
	}

	.vehicle-enough-points.cf,
	.vehicle-not-enough-points {
		margin-right: -15px;
		margin-top: -3px;
	}

	.vehicle-list.iso-featured {
		display: flex;
		flex-flow: wrap;
	}

	.vehicle-list__item {
		order: 0;
		width: 100%;
	}

	.vehicle-list__item.iso-preSelectedClass .vehicle-item {
		padding-right: 15px;
		/* margin-right: -15px; */
	}

	.iso-tag {
		background: #0a643a;
		color: #fff;
		display: block;
		font-size: 14px;
		padding: 4px 8px 1px 8px;
		width: calc(100% + 15px);
	}

	.iso-unavailable-msg {
		background: #f2f2f2;
		border-bottom: 0.125rem solid #c3c3c3;
		display: block;
		font-size: 14px;
		padding: 15px 20px;
		width: 100%;
	}

	.iso-preSelectedClass.iso-preSelectedClass-filtered {
		margin-top: 0;
	}

	.iso-preSelectedClass-filtered .iso-tag {
		display: none;
	}

	.iso-preSelectedClass-filtered .vehicle-item.is-pre-selected,
	.iso-preSelectedClass-filtered .vehicle-item.is-search-by-filter {
		border-color: #169a5a;
	}

	.iso-preSelectedClass {
		margin-top: 7px;
	}

	.iso-tag {
		display: inline;
		font-size: 12px;
		font-weight: 600;
		padding: 4px 15px;
		position: relative;
		width: auto;
	}

	.iso-tag:after {
		border-left: 6px solid transparent;
		border-right: 6px solid transparent;
		border-top: 6px solid #0a643a;
		bottom: -6px;
		content: " ";
		height: 0;
		left: 20px;
		position: absolute;
		width: 0;
	}

	/* default featured color */
	/* .iso-preSelectedClass .rs-callout.rs-callout--highlight {
		border-left: 4px solid #ce810d;
	} */

	.iso-preSelectedClass .rs-callout--highlight .rs-callout__icon {
		fill: #c96d1f;
	}

	/* reduces whitespace*/
	.iso-preSelectedClass .vehicle-item {
		padding: 1rem;
		padding-bottom: 0rem;
	}

	.iso-preSelectedClass .rs-icon {
		width: 1em;
		height: 1em;
	}

	/* potentially fixes sorting issue */
	.vehicle-list__item .vehicle-item {
		width: 100%;
	}

	.vehicle-select__main .vehicle-list {

		display: flex;
		flex-direction: column;
	}

	.vehicle-list .vehicle-list__item {
		display: flex;
	}

	@media (max-width:1135px) {
		.iso-preSelectedClass .rs-callout.rs-callout--highlight {
			font-size: 12px;
		}

		/* increases whitespace*/
		.iso-preSelectedClass .vehicle-item {
			padding: 1rem;
		}
	}

	/* for desktop down */
	@media (max-width: 1081px) {

		.vehicle-enough-points.cf,
		.vehicle-not-enough-points {
			margin-right: 0;
		}

		.vehicle-list__item.iso-preSelectedClass .vehicle-item {
			padding-right: 0;
			margin-right: 0;
		}

		.iso-tag {
			margin-left: 5px;
			width: 100%;
		}
	}

	/* for tablet */
	@media (max-width: 1081px) and (min-width: 768px) {

		/* lines up pricing */
		.iso-preSelectedClass .vehicle-item__pricing {
			margin-right: 35px;
		}

	}

	/* for tablet */
	@media (max-width: 768px) and (min-width: 654px) {

		/* lines up pricing */
		.iso-preSelectedClass .vehicle-item__pricing {
			margin-right: 20px;
		}
	}

	@media (max-width: 653px) {

		.iso-preSelectedClass .vehicle-item__main-content .vehicle-item__summary .rs-callout.rs-callout--highlight {
			margin-bottom: 5%;
		}

		.vehicle-list__item.iso-preSelectedClass .vehicle-item {
			padding-right: 15px
		}

		.iso-preSelectedClass img {
			margin-top: 45px;
		}
	}
</style>
<script>
	!(function () {
		"use strict";
		var r = {
			debug: !1,
			account: "Enterprise",
			portfolio: "Enterprise.com",
			test: "Featured Vehile 3.0: List C",
			creative: "Challenger 1",
			filters: ".vehicle-filter__header-cta .vehicle-filter__header-link",
			vehicleItem: ".vehicle-list__item",
			preSelected: ".vehicle-item.is-search-by-filter, .vehicle-item.is-pre-selected",
			template:
				'<span class="rs-callout rs-callout--highlight"><span class="rs-callout__icon-container"><i role="img" aria-hidden="true" class="rs-callout__icon rs-icon"><svg viewBox="0 0 22 20"><use xlink:href="#icn-star2"></use></svg></i></span><span class="rs-callout__label">{tag}</span></span>',
			featured: {
				0: { car: "SFAR", tag: "Most Versatile", shortTag: "Most Versatile" },
				1: { car: "MVAR", tag: "Best for Vacation", shortTag: "Best for Vacation" },
				2: { car: "MVAR", tag: "Best for Vacation", shortTag: "Best for Vacation" },
				3: { car: "MVAR", tag: "Best for Vacation", shortTag: "Best for Vacation" },
				4: { car: "SFAR", tag: "Most Versatile", shortTag: "Most Versatile" },
				5: { car: "SFAR", tag: "Most Versatile", shortTag: "Most Versatile" },
				6: { car: "SFAR", tag: "Most Versatile", shortTag: "Most Versatile" },
			},
			featuredOverride: {
				0: { car: "PPAR", tag: "Best for Hauling", shortTag: "Best for Hauling" },
				1: { car: "PPAR", tag: "Best for Hauling", shortTag: "Best for Hauling" },
				2: { car: "PPAR", tag: "Best for Hauling", shortTag: "Best for Hauling" },
				3: { car: "PPAR", tag: "Best for Hauling", shortTag: "Best for Hauling" },
				4: { car: "PPAR", tag: "Best for Hauling", shortTag: "Best for Hauling" },
				5: { car: "PPAR", tag: "Best for Hauling", shortTag: "Best for Hauling" },
				6: { car: "PPAR", tag: "Best for Hauling", shortTag: "Best for Hauling" },
			},
			altCar: "",
			featAvail: !1,
			audience: {
				branch: "airport",
				peopleSoftId: [
					"1019178",
					"1018543",
					"1019084",
					"1019129",
					"1019155",
					"1019192",
					"1019164",
					"1019131",
					"1019202",
					"1019138",
					"1019113",
					"1019184",
					"1019172",
					"1019087",
					"1021700",
					"1019326",
					"1019187",
					"1019181",
					"1019135",
					"1019146",
					"1021601",
					"1021051",
					"1019199",
					"1019158",
					"1022354",
					"1021052",
					"1034806",
					"1022518",
					"1029836",
					"1030702",
					"1039110",
				],
			},
			exclusions: { minDate: "2019-06-15T00:00:00", maxDate: "2019-08-31T00:00:00" },
			init: function () {
				new MutationObserver(function (e) {
					e.forEach(function (e) {
						e.removedNodes.forEach(function (e) {
							void 0 !== e.classList &&
								e.classList.contains("spinner-container") &&
								r.elementLoaded(r.vehicleItem, function () {
									r.chall();
									r.hideBanner();
								});
						});
					});
				}).observe(document.querySelector("body"), { subtree: !0, childList: !0 }),
					r.elementLoaded(r.vehicleItem, function () {
						ReservationStateTree.get(["model", "carSelect", "selectedCar"]) || r.chall();
					}),
					window.addEventListener("hashchange", r.hashHandler, !1),
					window.addEventListener("ttFeatVehicle", r.labelVehicle, !1);

				// Search filter bug fix
				r.observeEl('.is-search-by-filter.rs-tag-container--darkGreen', function (el) {
					var vehicleItem = el.closest('.vehicle-list__item');
					if (vehicleItem.classList.contains('iso-preSelectedClass-filtered')) {
						var featuredTag = vehicleItem.querySelector('.rs-callout');
						if (featuredTag) {
							featuredTag.style.display = 'none';
						}
					}
				});
				// adds filter box fix
				r.observeEl('.vehicle-filter__content .vehicle-filter__filter:last-child .vehicle-filter__filter-list-item:last-child', async function (el) {
					const rsCheckboxInputs = document.querySelectorAll(".vehicle-filter__filter-list-item input");

					rsCheckboxInputs.forEach(rs => {
						rs.addEventListener('change', function (e) {
							setTimeout(() => {
								r.chall();
							}, 1.5);
						});
					});
				});
			},
			hashHandler: function () {
				/cars/.test(location.hash) &&
					r.elementLoaded(r.vehicleItem, function () {
						ReservationStateTree.get(["model", "carSelect", "selectedCar"]) || r.chall();
					});
			},
			chall: function () {
				r.branchType = ReservationStateTree.get(["session", "reservationSession", "pickup_location", "location_type"]);
				var e = r.branchType == r.audience.branch,
					t = ReservationStateTree.get(["session", "reservationSession", "pickup_location", "id"]),
					t = r.checkId(t);
				(r.pickupDate = new Date(ReservationStateTree.get(["session", "reservationSession", "pickup_time"]))), t && e && r.runTest();
			},
			checkDate: function () {
				var e = new Date(r.exclusions.minDate),
					t = new Date(r.exclusions.maxDate);
				return r.pickupDate >= e && r.pickupDate <= t;
			},

			/* add this to hide tag when outside of designated location */
			checkId: function () {
				r.log('fn:checkId()');
				const peopleSoftId = ReservationStateTree.get(['session', 'reservationSession', 'pickup_location', 'id']);
				const filteredReservation = r.audience.peopleSoftId.filter(p => p == peopleSoftId);
				if (!filteredReservation.length) {
					r.hideBanner();
				}
				return r.audience.peopleSoftId.indexOf(peopleSoftId) > -1;
			},
			/* add this to hide tag when outside of designated location */
			hideBanner: function () {
				r.observeEl('.iso-preSelectedClass', function () {
					setTimeout(() => {
						const peopleSoftId = ReservationStateTree.get(['session', 'reservationSession', 'pickup_location', 'id']);
						const filteredReservation = r.audience.peopleSoftId.filter(p => p == peopleSoftId);
						const isoPreselected = document.querySelector('.iso-preSelectedClass');
						if (!filteredReservation.length) {
							document.querySelector('.iso-preSelectedClass').classList.add("iso-hide");
						}
						if (filteredReservation.length) {
							document.querySelector('.iso-preSelectedClass').classList.remove("iso-hide");
						}
					}, 200);
				})
			},
			checkGroup: function (t) {
				var a = !1;
				return (
					r.audience.group.forEach(function (e) {
						t.substring(0, e.length) == e && (a = !0);
					}),
					a
				);
			},
			runTest: function () {
				(r.day = a.getQueryParam("dayOverride") ? a.getQueryParam("dayOverride") : r.pickupDate.getDay()),
					(r.vehicleClass = (r.checkDate() ? r.featuredOverride : r.featured)[r.day]),
					(r.onLoadpreSelected = 0 < document.querySelectorAll(r.preSelected).length),
					r.checkSort();
				for (var e = document.querySelectorAll(".vehicle-filter__filter .form-checkbox,.vehicle-filter__header-link, .vehicle-redemption__options-cta, .iso-pay"), t = 0; t < e.length; t++)
					e[t].addEventListener(
						"click",
						function () {
							setTimeout(r.checkSort, 200);
						},
						!1
					);
				document.addEventListener("click", function (e) {
					(!e.target.matches('[data-dtm-tracking^="cars|filter_modal|submit"]') && !e.target.matches('[data-dtm-tracking^="car_filters|clear_filters|select"]')) ||
						ReservationStateTree.get(["model", "carSelect", "selectedCar"]) ||
						r.checkSort();
				}),
					/* add this to hide tag when outside of designated location */
					document.querySelector('.vehicle-header__sort-by .rs-input').addEventListener('change', function () {
						setTimeout(() => {
							r.checkSort();
							r.hideBanner();
						}, 100);
					}, false);
			},
			checkSort: function () {
				var sort = document.querySelector('.vehicle-header__sort-by .rs-input .rs-select').value;
				var list = document.querySelectorAll('.vehicle-list .vehicle-list__item');
				const peopleSoftId = ReservationStateTree.get(['session', 'reservationSession', 'pickup_location', 'id']);
				// const peopleSoftId = store.getState().toJS().app.baobab.session.reservationSession.pickupLocationWithDetail.location_id use this instead
				const filteredReservation = r.audience.peopleSoftId.filter(p => p == peopleSoftId);
				if (sort == 'Recommended') {
					r.elementLoaded('.iso-preSelectedClass', function () {
						const filteredList = [];
						list.forEach(l => {
							const listItems = l.querySelector(".vehicle-item");
							if (listItems.classList.contains("rs-tag-container")) {
								filteredList.push(l);
							};
						});

						if (filteredList.length > 0) {
							document.querySelector('.iso-preSelectedClass').style.order = filteredList.length;
							list.forEach((l, index) => {
								if ((!l.querySelector(".vehicle-item").classList.contains("rs-tag-container")) && (!l.classList.contains('iso-preSelectedClass'))) {
									l.style.order = index + (filteredList.length);
								};
							});
						} else {
							if (store.getState().toJS().app.baobab.session.reservationSession.pickup_location.id) {
								document.querySelector('.iso-preSelectedClass').style.order = -1;
							}
						};
					});
				};

				if (sort == 'High to Low') {
					r.elementLoaded('.iso-preSelectedClass', function () {
						const preSelectedList = document.querySelector('.iso-preSelectedClass');
						const dtmAttr = preSelectedList.getAttribute("data-dtm-tracking");
						const currentOrder = dtmAttr.split("|").slice(-1);
						setTimeout(() => {
							preSelectedList.style.order = currentOrder;
						}, 10);
					});
				};

				if (sort == 'Low to High') {
					r.elementLoaded('.iso-preSelectedClass', function () {
						const preSelectedList = document.querySelector('.iso-preSelectedClass');
						const dtmAttr = preSelectedList.getAttribute("data-dtm-tracking");
						const currentOrder = dtmAttr.split("|").slice(-1);
						setTimeout(() => {
							preSelectedList.style.order = currentOrder;
						}, 10);
					});
				};
				r.labelVehicle();
			},
			labelVehicle: function () {
				var e;
				(r.vehicleItems = document.querySelectorAll(".vehicle-list > li")),
					(r.lastPreselectedIndex = document.querySelectorAll(r.preSelected).length - 1),
					(r.lastPreselected = document.querySelectorAll(r.preSelected)[r.lastPreselectedIndex]),
					r.lastPreselected && ((e = Array.prototype.slice.call(r.vehicleItems)), (r.lastPreselectedIndex = e.indexOf(r.lastPreselected.parentNode))),
					r.findVehicle(r.vehicleClass.car),
					0 == document.querySelectorAll(".iso-preSelectedClass").length && r.altCar && !r.featAvail && r.findVehicle(r.altCar),
					r.reOrder();
			},
			findVehicle: function (e) {
				for (var t, a, s = 0; s < r.vehicleItems.length; s++)
					!r.vehicleItems[s].classList.contains("iso-preSelectedClass") &&
						r.vehicleItems[s].classList.contains("vehicle-list__item") &&
						((t = (a = r.vehicleItems[s].getAttribute("data-dtm-tracking").split("|"))[1]),
							(a = a[2]),
							t == e && "SOLD_OUT" != a && "RESTRICTED_AT_RETAIL_RATE" != a && (r.addPreselect(r.vehicleItems[s]), (r.featAvail = t != r.altCar)));
			},
			addFeaturedOrange: function () {
				r.observeEl('.rs-callout.rs-callout--highlight', function () {
					//Fix the orange tag showing when filter is used on a Green Featured item!

					const newTag = document.querySelector(".rs-callout.rs-callout--highlight");
					const pictureImg = newTag.parentElement.querySelector('.vehicle-item__image');
					const vehicleSummary = newTag.parentElement.querySelector('.vehicle-item__summary');


					const mediaQuery = window.matchMedia('(max-width: 653px)')

					function handleTabletChange(e) {
						// Check if the media query is true
						if (e.matches) {
							// Then log the following message to the console
							// console.log('Media Query Matched!');
							if (!newTag.parentElement.classList.contains("iso-preSelectedClass-filtered") && pictureImg !== null) {
								vehicleSummary.insertAdjacentElement("afterbegin", newTag);
							}
							if (newTag.parentElement.classList.contains("iso-preSelectedClass-filtered")) {
								newTag.style.display = "none";
							}
						} else {
							if (!newTag.parentElement.classList.contains("iso-preSelectedClass-filtered") && pictureImg !== null) {
								// console.log("pictureImg", pictureImg)
								pictureImg.insertAdjacentElement("afterbegin", newTag);
							}
							if (newTag.parentElement.classList.contains("iso-preSelectedClass-filtered")) {
								newTag.style.display = "none";
							}
						}
					}

					// Register event listener
					mediaQuery.addListener(handleTabletChange);

					// Initial check
					handleTabletChange(mediaQuery);
				});

			},
			addPreselect: function (e) {
				e.classList.add("iso-preSelectedClass");
				var t = e.querySelector(".vehicle-item"),
					t =
						(r.onLoadpreSelected && (t.classList.contains("is-search-by-filter") || t.classList.contains("is-pre-selected"))
							? e.classList.add("iso-preSelectedClass-filtered")
							: !r.onLoadpreSelected || (t.classList.contains("is-search-by-filter") && t.classList.contains("is-pre-selected")) || e.classList.add("iso-preselected-second"),
							a.supplant(r.template, { tag: r.onLoadpreSelected ? r.vehicleClass.shortTag : r.vehicleClass.tag }));
				e.insertAdjacentHTML("afterbegin", t);
				// adds tag fix for regression 633
				r.addFeaturedOrange();

			},
			reOrder: function () {
				var o = 0;
				var featVehicle = document.querySelector('.iso-preSelectedClass .vehicle-item');
				if (featVehicle && (!featVehicle.classList.contains('is-search-by-filter') || !featVehicle.classList.contains('is-pre-selected'))) {
					for (var i = 0; i < r.vehicleItems.length; i++) {
						if (!r.vehicleItems[i].classList.contains('iso-preSelectedClass')) {
							r.vehicleItems[i].style.order = o;

							if (i == 0 && r.lastPreselectedIndex == -1 && (r.vehicleItems[i].classList.contains('vehicle-list__unavailable-car') || r.vehicleItems[i].firstChild.classList.contains('vehicle-not-enough-points'))) {
								o += 1;
								featVehicle.parentNode.style.order = o;
							} else if (i == 0 && r.lastPreselectedIndex == -1 && !r.vehicleItems[i].firstChild.classList.contains('vehicle-not-enough-points')) {
								// featVehicle.parentNode.style.order = -1;
							} else if (i == r.lastPreselectedIndex) {
								o += 1;
								featVehicle.parentNode.style.order = o;
							}
							o++;
						} else {
							if (i == 0 && r.vehicleItems[i].classList.contains('iso-preSelectedClass')) {
								featVehicle.parentNode.style.order = o;
								o++;
							}
						}
					}
				}
				var e = new Event('ttFeatOrder');
				window.dispatchEvent(e);


				// var selectedCurCar = document.querySelector(".iso-preSelectedClass")
				// if (selectedCurCar) {
				// 	if (selectedCurCar.innerText.includes("Current Selection")) {
				// 		document.querySelector(".rs-callout.rs-callout--highlight").remove()
				// 	}
				// }

				// var preSel = document.querySelector(".vehicle-list__item.iso-preSelectedClass.iso-preSelectedClass-filtered")
				// if (preSel) {
				// 	if (preSel.children.length > 1)
				// 		if (preSel.children[0].className == 'rs-callout rs-callout--highlight' && preSel.children[1].className == 'rs-tag-container rs-tag-container--darkGreen vehicle-item is-search-by-filter') {
				// 			preSel.children[0].remove()
				// 		}
				// }

			},
			observeEl: function (selector, callback) {
				var processed = new Map();

				var processElement = function processElement(el) {
					if (processed && !processed.has(el)) {
						processed.set(el, true);
						callback(el);
					}
				};

				var lookForSelector = function lookForSelector() {
					var el = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;

					if (el.matches && el.matches(selector)) {
						if (processElement(el)) return true;
					}

					if (el.querySelectorAll) {
						var elements = el.querySelectorAll(selector);

						if (elements.length) {
							for (var i = 0; i < elements.length; i++) {
								var _el = elements[i];
								if (processElement(_el)) return true;
							}
						}
					}
				};
				lookForSelector();

				var obs = new MutationObserver(function (mutationsList) {
					mutationsList.forEach(function (record) {
						if (record && record.addedNodes && record.addedNodes.length) {
							for (var i = 0; i < record.addedNodes.length; i++) {
								var el = record.addedNodes[i].parentElement;
								if (el && lookForSelector(el)) return true;
							}
						}
					});
				});
				obs.observe(document, {
					attributes: true,
					attributeFilter: ['style', 'className'],
					childList: true,
					subtree: true
				});
			},
			elementLoaded: function (e, t) {
				window.clearTimeout(r.eleTimer),
					0 < document.querySelectorAll(e).length
						? "function" == typeof t && t()
						: (r.eleTimer = window.setTimeout(function () {
							r.elementLoaded(e, t);
						}, 100));
			},
			log: function (e) {
				!0 === r.debug && console.log(e);
			},
		},
			a = {
				getQueryParam: function (e) {
					for (var t = window.location.search.substring(1).split("&"), a = 0; a < t.length; a++) {
						var s = t[a].split("=");
						if (decodeURIComponent(s[0]) == e) return decodeURIComponent(s[1]);
					}
				},
				supplant: function (e, i) {
					return e.replace(/{([^{}]*)}/g, function (e, t) {
						for (var a = t.split(/\./), s = i, r = 0; r < a.length; r++) {
							if (null == s[a[r]]) return e;
							s = s[a[r]];
						}
						return "string" == typeof s || "number" == typeof s ? s : e;
					});
				},
			};
		r.init();
	})();
</script>