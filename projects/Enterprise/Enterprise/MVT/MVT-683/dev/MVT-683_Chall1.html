<style>
	.mvt-loyalty-with-reservations .cmp-teaser__image > div.cmp-image {
		display: none;
	}
	.mvt-loyalty-with-reservations .cmp-teaser__image {
 	background-image: url("data:image/svg+xml;charset=utf8,%3Csvg width='94' height='35' viewBox='0 0 94 35' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0_14_142)'%3E%3Cpath d='M68.763 20.6444C65.5152 20.4587 62.5868 22.5019 61.7616 25.58C61.522 26.4822 60.7233 27.119 59.765 27.119H36.8972V28.8173H59.7916C61.4687 28.8173 63.0394 27.7293 63.5452 26.1107C64.2107 23.7756 66.5002 22.2896 68.8961 22.4754C70.4401 22.4754 72.0374 23.1653 73.1289 24.4124C74.1405 25.5535 74.6197 27.0925 74.4067 28.6315C73.9541 31.4974 71.292 33.5671 68.4435 33.3283C67.0326 33.1956 65.7548 32.5322 64.8763 31.4443L63.4121 32.373C64.5834 33.859 66.3671 34.8408 68.2838 35H68.8961C72.4367 34.9204 75.4183 32.3465 75.9774 28.8704C76.3234 26.8271 75.7378 24.7574 74.3535 23.1653C72.9425 21.5466 70.9459 20.6179 68.763 20.6444Z' fill='%23127F4A'/%3E%3Cpath d='M85.3214 13.2411L71.8244 10.7468C70.5466 10.5876 69.2954 10.1099 68.2039 9.36694L60.0312 3.84761C56.3308 1.30023 52.87 -1.63075e-06 44.431 -1.63075e-06H36.5245C31.5729 -0.0796074 26.5415 0.955267 22.0425 3.05155L15.0943 6.66035C12.3523 8.06672 9.42396 8.86277 6.33588 9.04852H5.72359C2.58227 9.04852 0 11.5959 0 14.7536V22.7938C0 24.1205 0.745398 25.3412 1.94336 25.8984L4.92495 27.1986C7.18777 28.2335 9.58369 28.7908 12.0595 28.8173H16.2923C18.0227 28.8438 19.5135 27.7293 19.9926 26.1107C20.6848 23.8021 22.921 22.2631 25.3435 22.4754C26.9142 22.4754 28.4848 23.1653 29.5497 24.4124C30.5613 25.58 31.0139 27.119 30.7743 28.6581C30.2951 31.5239 27.7927 33.5406 24.8643 33.3283C23.4534 33.1956 22.1756 32.5322 21.2705 31.4443L19.8329 32.373C21.0042 33.859 22.7879 34.8408 24.7046 35H25.3169C28.8842 34.9469 31.8658 32.373 32.4514 28.8704C32.7975 26.8271 32.1852 24.7574 30.8275 23.1653C29.4432 21.5466 27.4466 20.6444 25.3169 20.6444H25.2637C21.9892 20.4587 19.0875 22.4754 18.2889 25.58C18.0493 26.5087 17.1708 27.119 16.2656 27.119H12.0329C9.82328 27.119 7.61371 26.5883 5.61711 25.6331L2.71538 24.3328C2.10309 24.0409 1.70377 23.4306 1.70377 22.7672V14.7536C1.70377 12.5512 3.51402 10.7468 5.72359 10.7202H6.41575C9.71679 10.508 12.938 9.60576 15.8929 8.01365L22.8145 4.43139C27.1272 2.52085 31.8924 1.59211 36.5511 1.69825H44.5375C52.5772 1.69825 55.6652 2.83927 59.1793 5.25398L67.1391 10.7733C68.4169 11.649 69.9343 12.2328 71.4783 12.4185L84.789 14.9128C90.06 16.6376 91.7904 18.2032 92.03 21.3874L92.3229 27.119H80.3166V28.8173H91.8437C93.015 28.8173 93.9734 27.862 93.9734 26.6945V25.4208L93.7072 21.2547C93.3345 16.3457 89.6873 14.7271 85.2948 13.2676L85.3214 13.2411Z' fill='%23127F4A'/%3E%3C/g%3E%3Cdefs%3E%3CclipPath id='clip0_14_142'%3E%3Crect width='94' height='35' fill='white'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E");
    width: 95px;
    height: 75px;
    background-repeat: no-repeat;
}
@media only screen and  (max-width: 476px) {
	.mvt-loyalty-with-reservations .cmp-teaser__overlay {
		padding-left: 15px;
	}
	.mvt-loyalty-with-reservations .cmp-teaser__image {
		background-image: url("data:image/svg+xml;charset=utf8,%3Csvg width='40' height='15' viewBox='0 0 40 15' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0_59_163)'%3E%3Cpath d='M29.2608 8.8476C27.8788 8.768 26.6327 9.64366 26.2815 10.9628C26.1795 11.3495 25.8397 11.6224 25.4319 11.6224H15.7009V12.3503H25.4432C26.1569 12.3503 26.8253 11.884 27.0405 11.1903C27.3237 10.1895 28.2979 9.55268 29.3175 9.63229C29.9745 9.63229 30.6542 9.92797 31.1187 10.4625C31.5491 10.9515 31.753 11.6111 31.6624 12.2707C31.4698 13.4989 30.337 14.3859 29.1249 14.2835C28.5245 14.2267 27.9807 13.9424 27.6069 13.4761L26.9839 13.8741C27.4823 14.511 28.2413 14.9318 29.0569 15H29.3175C30.8241 14.9659 32.0929 13.8628 32.3308 12.373C32.478 11.4973 32.2288 10.6103 31.6398 9.92797C31.0394 9.23426 30.1897 8.83623 29.2608 8.8476Z' fill='%23127F4A'/%3E%3Cpath d='M36.307 5.67475L30.5636 4.60576C30.0198 4.53753 29.4874 4.33283 29.0229 4.0144L25.5452 1.64897C23.9705 0.557238 22.4979 -2.33366e-06 18.9068 -2.33366e-06H15.5423C13.4353 -0.0341191 11.2943 0.409399 9.37978 1.30781L6.42311 2.85443C5.2563 3.45716 4.0102 3.79833 2.69612 3.87794H2.43557C1.09884 3.87794 0 4.96967 0 6.32297V9.76876C0 10.3374 0.317191 10.8605 0.826961 11.0993L2.09572 11.6566C3.05862 12.1001 4.07817 12.3389 5.13169 12.3503H6.93288C7.66922 12.3616 8.3036 11.884 8.50751 11.1903C8.80204 10.2009 9.75361 9.54132 10.7845 9.6323C11.4528 9.6323 12.1212 9.92797 12.5743 10.4625C13.0048 10.9628 13.1974 11.6224 13.0954 12.282C12.8915 13.5102 11.8267 14.3745 10.5806 14.2835C9.98018 14.2267 9.43642 13.9424 9.05126 13.4761L8.43954 13.8741C8.93798 14.511 9.69697 14.9318 10.5126 15H10.7732C12.2911 14.9773 13.5599 13.8741 13.8091 12.373C13.9564 11.4973 13.6958 10.6103 13.1181 9.92797C12.529 9.23427 11.6794 8.84761 10.7732 8.84761H10.7505C9.35712 8.768 8.12234 9.6323 7.7825 10.9628C7.68054 11.3609 7.30671 11.6224 6.92155 11.6224H5.12036C4.18012 11.6224 3.23988 11.395 2.39026 10.9856L1.15548 10.4284C0.894931 10.3033 0.725007 10.0417 0.725007 9.75739V6.32297C0.725007 5.37907 1.49533 4.60576 2.43557 4.59439H2.7301C4.13481 4.50341 5.50552 4.11675 6.76296 3.43442L9.7083 1.89916C11.5435 1.08036 13.5712 0.682333 15.5537 0.727822H18.9521C22.3733 0.727822 23.6873 1.21683 25.1827 2.2517L28.5698 4.61713C29.1136 4.99242 29.7593 5.24261 30.4163 5.32221L36.0804 6.3912C38.3234 7.1304 39.0598 7.80136 39.1617 9.16603L39.2863 11.6224H34.1773V12.3503H39.0824C39.5809 12.3503 39.9887 11.9409 39.9887 11.4405V10.8946L39.8754 9.10917C39.7168 7.00531 38.1648 6.3116 36.2957 5.68612L36.307 5.67475Z' fill='%23127F4A'/%3E%3C/g%3E%3Cdefs%3E%3CclipPath id='clip0_59_163'%3E%3Crect width='40' height='15' fill='white'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E");
		width: 40px;
		height: 15px;
		background-repeat: no-repeat;	
	}
	.mvt-loyalty-with-reservations .cmp-teaser__content {
		margin-left: 15px;
	}
}
</style>
<script>
(function() {
	'use strict';
	var isoTest = {
		account : 'EHI',
		portfolio : 'Enterprise',
		test : 'MVT-683',
		creative : 'Loyalty member with upcoming reservations',
		selector : '.container.responsivegrid.teaser-style-3 .cmp-container .teaser.teaser-style-3 .cmp-teaser__image',
        loginSelector : '.header-nav-item.sign-in',
        authSelector : '.header-nav-item.sign-in button.cta.cta--primary.cta--small.cta--noMargin.utility-nav-label.utility-nav-label--logged-in',
		auth : {
			'type': 'auth',
			'Header': 'Manage Upcoming Reservation',
			'Copy': 'Modify and change or view any important information about your upcoming reservation.',
			'Link':'https://www.enterprise.com/en/account.html#reservation'
			
			

		},
		unAuth : {
			'type': 'unAuth',
			'Header': 'Email Offers',
			'Copy': 'Don\'t miss an excuse to hit the road: our latest offers delivered to your inbox.',
			'Link':'https://www.enterprise.com/en/email-specials.html?icid=home.3up1-_-email.specials-_-ENUS.NULL'
		},
		init : function() {

			//isoTest.debug = true;
			
			if (_satellite && typeof _satellite.setVar === 'function' && typeof _satellite.track === 'function') {
				_satellite.setVar('TargetCampaign', isoTest.test);
				_satellite.setVar('TargetCreative', isoTest.creative);
			}

			isoTest.log('Test Running...');
			isoTest.log(isoTest.account + ' - ' + isoTest.portfolio);
			isoTest.log(isoTest.test + ' - ' + isoTest.creative);

			helpers.elementLoaded(isoTest.selector, function() {
				isoTest.log('Test Ready!');
  				isoTest.chall();
				isoTest.inFlightUpdates();
			});		
		},
		chall : function() {
			// Your code goes here
			if (document.querySelector(isoTest.authSelector)) {
                    isoTest.logInUpdates();
             } 
		},
		logInUpdates: function() {
			if(!document.querySelector('.mvt-loyalty-with-reservations')) {
				//console.log('Registered');
				isoTest.tileUpdate(isoTest.auth);
				isoTest.addEventsTag();
			}
		},
		logOutUpdates: function() {
			//console.log('logout');
			if(document.querySelector('.mvt-loyalty-with-reservations')) {
				isoTest.tileUpdate(isoTest.unAuth);
				document.querySelector('.mvt-loyalty-with-reservations').classList.remove('mvt-loyalty-with-reservations');
			}

		},
		tileUpdate: function(user) {
				var mainTile = document.querySelectorAll(isoTest.selector)[1].parentElement.parentElement.classList.add('mvt-loyalty-with-reservations');
				var Url = document.querySelectorAll('.mvt-loyalty-with-reservations  a');
				var headline = document.querySelector('.mvt-loyalty-with-reservations div.cmp-teaser__content h3 > a');
            	var bodyCopy = document.querySelector('.mvt-loyalty-with-reservations div.cmp-teaser__content p');

				Url.forEach(embeddedUrl => {
                	embeddedUrl.setAttribute('href',user.Link);
           		});
				headline.innerText = user.Header;
				if(user.type == 'unAuth') {
					bodyCopy.innerHTML = user.Copy;
				} else {
					bodyCopy.innerText = user.Copy;
				}


		},
		inFlightUpdates: function() {
             var eleUpdates = new MutationObserver(function(mutationsList) {
                 mutationsList.forEach(function(mutation){
                     //added nodes 
                     mutation.addedNodes.forEach(function (addedNode){
                         if(addedNode.classList != undefined) {
                         if(document.querySelector('.utility-nav-label--logged-in') ) {
                                 isoTest.logInUpdates();
                             } else if(document.querySelector('.login-widget.active')){
								if(!document.querySelector('.field-container.logged-in')) {
										isoTest.logOutUpdates();
									}		
                             } else {
                                 isoTest.logOutUpdates();
                             }
                         }
                     });
                 });
             }) ;
             //after observe add target element
                 eleUpdates.observe(document.querySelector(isoTest.loginSelector), {subtree: true, childList: true});
             },

         addEventsTag : function() {
           //console.log('add event');
		   if( document.querySelector('.mvt-loyalty-with-reservations')){
				isoTest.fireTag89('','Manage Reservations tile seen');
				document.querySelector('.container.responsivegrid.teaser-style-3 .cmp-container .teaser.teaser-style-3.mvt-loyalty-with-reservations a.cmp-teaser__action-link--overlay[href="https://www.enterprise.com/en/account.html#reservation"]').addEventListener('click',function(e){
					if(e.target.href == 'https://www.enterprise.com/en/email-specials.html?icid=home.3up1-_-email.specials-_-ENUS.NULL'){
						isoTest.fireTag('','Email Offers 3 up click');
					} else {
						isoTest.fireTag('','Manage Reservations 3 up click');
					}
					
		  		 });
		   }
		   document.querySelector('.container.responsivegrid.teaser-style-3 .cmp-container .teaser.teaser-style-3 a.cmp-teaser__action-link--overlay[href="/en/car-rental/deals.html"]').addEventListener('click',function(){
			isoTest.fireTag('','Current Deals 3 up click');
		   });
		   
		   document.querySelector('.container.responsivegrid.teaser-style-3 .cmp-container .teaser.teaser-style-3 a.cmp-teaser__action-link--overlay[href="https://www.enterprise.com/en/car-rental/mobile-app.html?icid=home.three.up-_-mobile-app-_-ENUS"]').addEventListener('click',function(){
			isoTest.fireTag('','Download the Enterprise Plus App 3 up click');
		   });
		  
		   
         },

		fireTag : function(element, value) {
			var linkName = value ? value : element.innerText;
				linkName = isoTest.test ? isoTest.test + ' : ' + linkName : linkName;
			s.linkTrackVars = 'eVar20';
			s.eVar20 = linkName;
			s.tl(this, 'o', linkName);
		},
		fireTag89 : function(element, value) {
             var linkName = value ? value : element.innerText;
                 linkName = isoTest.test ? isoTest.test + ' : ' + linkName : linkName;
             s.linkTrackVars = 'eVar89';
             s.eVar89 = linkName;
             s.tl(this, 'o', linkName);
         },
		
		log : function(obj){
			if(isoTest.debug === true){
				console.log(obj);
			}
		}
	};

	var helpers = {
		elementLoaded : function (ele, callback) {
			isoTest.log('elementLoaded::  ' + ele + ' - Checking...');
			window.clearTimeout(isoTest.eleTimer);
			if (document.querySelectorAll(ele).length > 0) {
				if (typeof callback === 'function') {
					isoTest.log('elementLoaded::  ' + ele + ' - Found!');
					callback();
				}
	        } else {
	            isoTest.eleTimer = window.setTimeout(function(){helpers.elementLoaded(ele, callback);}, 100);
	        }
		},
	};

	isoTest.init();
})();
</script>