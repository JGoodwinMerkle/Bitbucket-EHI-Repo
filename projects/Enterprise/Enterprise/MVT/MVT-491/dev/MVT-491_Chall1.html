<style>
    .iso-auth-hide {
        display: none;
    }
    .iso-auth-img {
        background-image: url("data:image/svg+xml;charset=utf8,%3Csvg width='39' height='50' viewBox='0 0 39 50' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0_1705_9267)'%3E%3Cpath d='M15.25 37.5901C14.5416 37.5881 13.8484 37.7964 13.2584 38.1886C12.6684 38.5808 12.2079 39.1392 11.9354 39.7932C11.6629 40.4471 11.5906 41.1673 11.7276 41.8624C11.8646 42.5575 12.2048 43.1963 12.7051 43.698C13.2053 44.1997 13.8432 44.5416 14.5379 44.6806C15.2327 44.8195 15.953 44.7492 16.6077 44.4785C17.2625 44.2079 17.8222 43.749 18.216 43.1601C18.6098 42.5711 18.82 41.8786 18.82 41.1701C18.8174 40.2232 18.4408 39.3156 17.7721 38.6451C17.1035 37.9746 16.197 37.5954 15.25 37.5901ZM15.25 42.7401C14.9367 42.7421 14.6299 42.6509 14.3685 42.478C14.1072 42.3052 13.9031 42.0585 13.7823 41.7694C13.6614 41.4803 13.6293 41.1618 13.6899 40.8544C13.7506 40.5469 13.9013 40.2645 14.1228 40.0429C14.3444 39.8214 14.6269 39.6706 14.9343 39.61C15.2417 39.5494 15.5602 39.5815 15.8493 39.7023C16.1384 39.8231 16.3851 40.0272 16.5579 40.2886C16.7308 40.5499 16.822 40.8568 16.82 41.1701C16.8174 41.5857 16.6512 41.9835 16.3573 42.2774C16.0634 42.5712 15.6656 42.7375 15.25 42.7401Z' fill='%23169A5A'/%3E%3Cpath d='M37.63 10.4301C37.2129 10.0116 36.7173 9.67956 36.1716 9.45302C35.6259 9.22647 35.0409 9.10986 34.45 9.10986C33.8592 9.10986 33.2741 9.22647 32.7285 9.45302C32.1828 9.67956 31.6872 10.0116 31.2701 10.4301L30.57 11.22V5.51004C30.57 4.06196 29.9948 2.67319 28.9709 1.64925C27.9469 0.625298 26.5581 0.0500488 25.11 0.0500488H5.51004C4.06277 0.0526923 2.67554 0.628785 1.65216 1.65216C0.628785 2.67554 0.0526923 4.06277 0.0500488 5.51004V44.06C0.0526923 45.5073 0.628785 46.8945 1.65216 47.9179C2.67554 48.9413 4.06277 49.5174 5.51004 49.52H25.11C26.5581 49.52 27.9469 48.9448 28.9709 47.9209C29.9948 46.8969 30.57 45.5081 30.57 44.06V23.9L37.68 16.7901C38.0985 16.3729 38.4305 15.8773 38.6571 15.3316C38.8836 14.7859 39.0002 14.2009 39.0002 13.61C39.0002 13.0192 38.8836 12.4342 38.6571 11.8885C38.4305 11.3428 38.0985 10.8472 37.68 10.4301H37.63ZM2.00003 5.43005C2.00003 4.97568 2.08955 4.52574 2.26343 4.10596C2.43731 3.68617 2.69217 3.30475 3.01346 2.98346C3.33475 2.66217 3.71617 2.40731 4.13596 2.23343C4.55574 2.05955 5.00568 1.97005 5.46005 1.97005H25.06C25.5144 1.97005 25.9643 2.05955 26.3841 2.23343C26.8039 2.40731 27.1853 2.66217 27.5066 2.98346C27.8279 3.30475 28.0828 3.68617 28.2567 4.10596C28.4305 4.52574 28.5201 4.97568 28.5201 5.43005V7.02005H2.00003V5.43005ZM28.57 44.0101C28.5674 44.9269 28.202 45.8054 27.5537 46.4537C26.9054 47.102 26.0269 47.4674 25.11 47.47H5.51004C4.5932 47.4674 3.71468 47.102 3.06638 46.4537C2.41807 45.8054 2.05269 44.9269 2.05005 44.0101V9.01004H28.57V13.22L17.88 23.92L12.75 18.7901C12.3324 18.3718 11.8365 18.0399 11.2906 17.8133C10.7448 17.5867 10.1596 17.4698 9.56857 17.4693C8.97753 17.4689 8.39218 17.5848 7.84595 17.8106C7.29972 18.0363 6.8033 18.3674 6.38504 18.785C5.96678 19.2027 5.63488 19.6986 5.40826 20.2444C5.18165 20.7903 5.06476 21.3755 5.0643 21.9665C5.06384 22.5576 5.17979 23.1429 5.40555 23.6891C5.6313 24.2354 5.96243 24.7318 6.38004 25.15L14.59 33.3501L14.7 33.46C15.5434 34.2997 16.685 34.7711 17.875 34.7711C19.0651 34.7711 20.2067 34.2997 21.05 33.46L28.56 25.95L28.57 44.0101ZM36.2701 15.3801L30.57 21.0701L28.57 23.0701L19.57 32C19.3403 32.2331 19.0662 32.4178 18.7639 32.5431C18.4616 32.6685 18.1373 32.7321 17.81 32.7301C17.4814 32.7312 17.1559 32.6673 16.8521 32.542C16.5483 32.4167 16.2723 32.2325 16.04 32L7.73004 23.69C7.37489 23.3363 7.1343 22.8838 7.03952 22.3916C6.94474 21.8993 7.00013 21.3899 7.19852 20.9296C7.3969 20.4692 7.72911 20.0791 8.15201 19.8099C8.57491 19.5407 9.06896 19.4049 9.57004 19.42C9.89729 19.418 10.2216 19.4816 10.5239 19.6069C10.8262 19.7323 11.1003 19.917 11.33 20.15L17.88 26.69L28.57 16L30.57 14L32.73 11.84C33.2004 11.3723 33.8367 11.1097 34.5 11.1097C35.1634 11.1097 35.7997 11.3723 36.2701 11.84C36.7288 12.3182 36.9808 12.9577 36.9714 13.6203C36.962 14.2829 36.6921 14.9151 36.22 15.3801H36.2701Z' fill='%23169A5A'/%3E%3C/g%3E%3Cdefs%3E%3CclipPath id='clip0_1705_9267'%3E%3Crect width='38.95' height='49.46' fill='white'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-size: cover;
        flex-shrink: 0;
        height: 29.01px;
        margin-right: 1rem;
        width: 23px;
        margin-bottom: 0px;
    }

    @media only screen and  (min-width: 39.8em) {
        .iso-auth-img {
            width: 39px;
            height: 50px;
            margin-bottom: 1.3rem;
            margin-right: auto;
            margin-left: auto;
        }
    }
</style>
<script>
(function() {
	'use strict';
	var isoTest = {
		account : 'EHI',
		portfolio : 'Enterprise',
		test : 'MVT-491',
		creative : 'Challenger 1',
		selector : '.two-up-three-up-container ul.two-up-three-up-container__list a > div >img',
        loginSelector : '.header-nav-item.sign-in',
        authSelector : '.header-nav-item.sign-in button.cta.cta--primary.cta--small.cta--noMargin.utility-nav-label.utility-nav-label--logged-in',
		init : function() {

			//isoTest.debug = true;
            
			
			if (_satellite && typeof _satellite.setVar === 'function' && typeof _satellite.track === 'function') {
				_satellite.setVar('TargetCampaign', isoTest.test);
				_satellite.setVar('TargetCreative', isoTest.creative);
			}

			isoTest.log('Test Running...');
			isoTest.log(isoTest.account + ' - ' + isoTest.portfolio);
			isoTest.log(isoTest.test + ' - ' + isoTest.creative);

			
            helpers.elementLoaded(isoTest.selector, function() {
				isoTest.log('Test Ready!');
  				isoTest.chall();
                isoTest.inFlightUpdates();
            });
		
		},
	
		chall : function() {

			// Your code goes here
               if (document.querySelector(isoTest.authSelector)) {
                        isoTest.logInUpdates();
                } 
            

		},
        logInUpdates: function() {
			if(!document.querySelector('.iso-auth-img')) {
			//console.log('login');
            var iconImg = document.querySelectorAll(isoTest.selector)[2];
            var embeddedUrl = document.querySelectorAll(isoTest.selector)[2].parentElement.parentElement;
                embeddedUrl.classList.add('iso-auth-loyalty');
            var headline = document.querySelector('.iso-auth-loyalty h2.two-up-three-up-tile__heading');
            var bodyCopy = document.querySelector('.iso-auth-loyalty .two-up-three-up-tile__text p');
            iconImg.insertAdjacentHTML('beforebegin','<div class="iso-auth-img"></div');
            iconImg.classList.add('iso-auth-hide');
            embeddedUrl.setAttribute('href','https://www.enterprise.com/en/car-rental/mobile-app.html?icid=home.three.up-_-mobile-app-_-ENUS');
            headline.innerText = 'Download The Enterprise App';
            bodyCopy.innerText = 'Enterprise is bringing innovation to the rental experience. Members with the app may be eligible to try new features soon.';
			}
        },
        logOutUpdates: function() {
			if(document.querySelector('.iso-auth-img')) {
				//console.log('logout');
            var iconImg = document.querySelectorAll(isoTest.selector)[2];
            var embeddedUrl = document.querySelectorAll(isoTest.selector)[2].parentElement.parentElement;
                embeddedUrl.classList.add('iso-auth-loyalty');
            var headline = document.querySelector('.iso-auth-loyalty h2.two-up-three-up-tile__heading');
            var bodyCopy = document.querySelector('.iso-auth-loyalty .two-up-three-up-tile__text p');
            iconImg.classList.remove('iso-auth-hide');
            document.querySelector('.iso-auth-img').remove();
            embeddedUrl.setAttribute('href','https://www.enterprise.com/en/loyalty.html?icid=home.3up1-_-loyalty-_-ENUS.NULL');
            headline.innerText = 'Not an Enterprise PlusÂ® member?';
            bodyCopy.innerText = 'You could be earning points toward free rentals. What are you waiting for?';

		}
        },
        inFlightUpdates: function() {
            var eleUpdates = new MutationObserver(function(mutationsList) {
                mutationsList.forEach(function(mutation){
                    //added nodes 
                    mutation.addedNodes.forEach(function (addedNode){
                        if(addedNode.classList != undefined) {
                          //  console.log('added:', addedNode);
                        if(addedNode.classList.contains('utility-nav-label--logged-in') ) {
                                //actions
                                isoTest.logInUpdates();
                            } else if(document.querySelector('.login-widget.active')){
								//console.log(!document.querySelector('.field-container.logged-in'));
								if(!document.querySelector('.field-container.logged-in')) {
									isoTest.logOutUpdates();
									//console.log('remove1');
								}
                                
                            } else {
								isoTest.logOutUpdates();
								//console.log('remove2');
							}
                        }
                    });

                });
            }) ;
            //after observe  add target element
            eleUpdates.observe(document.querySelector(isoTest.loginSelector), {subtree: true, childList: true});
        },
        
		fireTag : function(element, value) {
			var linkName = value ? value : element.innerText;
				linkName = isoTest.test ? isoTest.test + ' : ' + linkName : linkName;
			s.linkTrackVars = 'eVar20';
			s.eVar20 = linkName;
			s.tl(this, 'o', linkName);
		},
		log : function(obj){
			if(isoTest.debug === true){
				console.log(obj);
			}
		}
	};

	var helpers = {
		elementLoaded : function (ele, callback) {
			isoTest.log('elementLoaded::  ' + ele + ' - Checking...');
			window.clearTimeout(isoTest.eleTimer);
			if (document.querySelectorAll(ele).length > 0) {
				if (typeof callback === 'function') {
					isoTest.log('elementLoaded::  ' + ele + ' - Found!');
					callback();
				}
	        } else {
	            isoTest.eleTimer = window.setTimeout(function(){helpers.elementLoaded(ele, callback);}, 100);
	        }
		},
	    supplant : function(str, o) {
			return str.replace(/{([^{}]*)}/g, function(a, b) {
		        var p = b.split(/\./),
		            c = o;
		        for (var i = 0; i < p.length; i++) {
		          	if (c[p[i]] == null)
		            	return a;
		          	c = c[p[i]];
		        }
				return typeof c === 'string' || typeof c === 'number' ? c : a;
			});
		}
	};

	isoTest.init();
})();
</script>