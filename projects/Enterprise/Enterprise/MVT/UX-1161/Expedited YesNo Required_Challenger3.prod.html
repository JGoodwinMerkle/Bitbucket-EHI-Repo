<style>@-webkit-keyframes pulse{from{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.25);transform:scale(1.25)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes pulse{from{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.25);transform:scale(1.25)}to{-webkit-transform:scale(1);transform:scale(1)}}.pulse{-webkit-animation:pulse .7s 1;animation:pulse .7s 1;-webkit-animation-name:pulse;animation-name:pulse}#expedited input[type=radio]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff;border:2px solid gray;border-radius:100%;padding:0;min-width:20px;min-height:20px}#expedited input[type=radio]:before{border-radius:100%;content:'';display:block;height:8px;margin:4px;width:8px}#expedited input[type=radio]:checked:before{background:#169a5a}#expedited input[type=radio]:checked{border-color:#169a5a}#expedited input[type=radio]:focus:invalid{border-color:#fec621}.expedited-option label{display:inline;left:30px;position:absolute;top:1px}.expedited-option span{display:block;margin-bottom:14px;position:relative}.expedited-option span:nth-of-type(1){padding-right:165px}.expedited-option span:nth-of-type(2){padding-right:103px}@media (min-width:410px){.expedited-option span{display:inline-block;margin-bottom:0}}#expedited-submit{display:none}.submit-button-wrapper{position:relative}.verification-page .submit.expedited-submit{top:-40px;line-height:26px;position:absolute}#reviewSubmit{position:relative}.expedited-option{margin-bottom:0}.expedited-option p{font-weight:700;padding-bottom:.8em}.error-expedited-radio{display:none;margin:14px 0}.error-expedited-radio.show{display:block}.expedite-optional-text{display:none}.expedited-form>section>div:nth-child(2){display:none}.expedited-form.show>section>div:nth-child(2){display:block}.verification-page .review-section .section-content .expedited-form h2.view-header{display:none}#expedited .expedited-form .expedited-disclaimer{display:none}#expedited.expedited-step-1 .expedited-form .expedited-disclaimer{display:none}#expedited.expedited-step-2 .expedited-form .expedited-disclaimer{display:block}.expedited-skip{color:#169a5a;cursor:pointer;display:none;float:right;font-size:14px;font-weight:700;margin-top:8px;text-transform:uppercase}.expedited-step-2 .expedited-skip{display:inline-block}.expedited-step-1-desc{display:none}.expedited-step-1-desc ul{margin:.8em 0}.expedited-step-1-desc li{font-size:14px;list-style:disc outside;margin-left:20px}.expedited-no-note{display:none;margin-top:12px;overflow:hidden}@media (min-width:968px){.expedited-no-note p{float:right;margin-left:215px}}#expedited .expedited-step-1-desc-note{font-size:12px;margin-bottom:2em}#expedited.chose-yes .expedited-form>section>div:nth-child(2){display:block}#expedited.chose-yes .expedited-option{border-bottom:1px solid #c3c3c3;margin-bottom:1.5em;padding-bottom:1.5em}#expedited.chose-yes.expedited-step-1 .expedited-step-1-desc{display:block}#expedited.expedited-step-2 .expedited-step-1-desc{display:none}#expedited.chose-no .expedited-no-note{display:block}#expedited.chose-yes .expedited-no-note{display:none}.personal-info-error-wrap{display:none}.personal-info-error-wrap.show{display:block}.expedited-progress-bar{border-bottom:2px solid #333;border-top:1px solid #c3c3c3;display:none;flex-wrap:wrap;font-weight:700;margin-bottom:1em;padding:20px 0 3px 0;position:relative;text-align:center;width:100%}.chose-yes .expedited-progress-bar{display:flex}#expedited.expedited-step-1 .epb-2-2{display:none}#expedited.expedited-step-2 .epb-1-2{display:none}#expedited.expedited-step-1.expedited-step-2 .epb-2-2{display:inline-block}#expedited.expedited-step-2 .epb-step-1 span::before{border:solid #f3f3f3;border-width:0 2px 2px 0;left:9px;top:0}.expedited-step-2 .epb-step-1 span::after,.expedited-step-2 .epb-step-1 span::before{border:solid #181918;border-width:0 2px 2px 0;content:'';display:block;height:12px;left:7px;position:absolute;top:-1px;transform:rotate(45deg);width:5px}.expedited-progress-bar::after,.expedited-progress-bar::before{border-top:1px solid #c3c3c3;bottom:0;content:'';position:absolute;top:-1px;width:20px}.expedited-progress-bar::before{left:-20px}.expedited-progress-bar::after{right:-20px}.epb-step-1{text-align:left;width:100%}#expedited .epb-step-1 p{font-size:18px}.epb-step-2{font-weight:400;text-align:left;width:100%}.epb-step>span{background-color:#fff;border:2px solid #333;border-radius:100%;font-size:12px;padding:1px 6px}.epb-step p{margin:0}#expedited.chose-yes .expedited-option{border-bottom:0;margin-bottom:0}#expedited.expedited-returning.expedited-step-1 .epb-step-2{display:none}@media (min-width:749px){.expedited-progress-bar{flex-wrap:nowrap}.expedited-progress-bar::after,.expedited-progress-bar::before{width:40px}.expedited-progress-bar::before{left:-40px}.expedited-progress-bar::after{right:-40px}.epb-step p span{display:inline}.epb-step-1{width:75%}.epb-step-2{text-align:right;width:25%}}.personal-information .personal-entry-form .privacy-disclaimer{margin-left:38px}.verification-page .review-section .section-content .personal-entry-form label{margin-bottom:0}#expedited.expedited .find-action .btn.disabled{border-color:#666;color:#666}#expedited.expedited .expedite-optional-text{font-size:12px}#expedited .icon.icon-included-theftprotection-2{background-image:url(/content/dam/ecom/hosted/ico-shield.png);margin-left:-23px;margin-right:3px}#expedited .disclaimer-content span:last-of-type,#expedited .find-action .search-disclaimer .disclaimer-content strong{font-weight:600}#expedited.expedited .find-action .btn{margin-right:15px}#expedited.expedited .find-action .search-disclaimer{float:right;margin-top:-7px;width:calc(100% - 245px)}#expedited-skip-link{display:none}.iso-expedited{display:flex}#expedited p{font-size:14px;margin-bottom:0}.iso-expedited li{font-size:14px;list-style:disc outside;margin-left:20px}.iso-expedited .content{float:left;width:calc(80% - 20px)}.iso-expedited .icon{float:right;margin-left:20px;max-width:70px;width:20%}.iso-expedited-skip{border-bottom:1px solid #d3d3d3;margin:10px 0 20px}.expedited .edit.iso-skip{margin-left:0}@media (min-width:749px) and (max-width:860px){#expedited.expedited .find-action .search-disclaimer{display:block;float:none;margin:5px 0 0 23px;width:100%}}@media (max-width:540px){#expedited.expedited .find-action .search-disclaimer{display:block;float:none;margin:5px 0 0 23px;width:100%}}@media (max-width:428px){.iso-expedited .content{width:100%}.iso-expedited .icon{display:none}}</style><script>(function() {
	'use strict';
		var isoTest = {
		debug: true,
		account: 'Enterprise',
		portfolio: 'Enterprise.com',
		test: 'Expedited Y/N Required',
		creative: 'Challenger 3',
		selector: '#expedited .expedited-form .expedited-disclaimer',
		init: function() {

			if (_satellite && _satellite.setVar && typeof _satellite.setVar === 'function') {
				_satellite.setVar('TargetCampaign', isoTest.test);
				_satellite.setVar('TargetCreative', isoTest.creative);
			}

			isoTest.log("Test Running...");
			isoTest.log(isoTest.account + " - " + isoTest.portfolio);
			isoTest.log(isoTest.test + " - " + isoTest.creative);
				
			isoTest.elementLoaded(isoTest.selector, function() {	
				isoTest.log("Test Ready!");	
  				isoTest.chall();
			});

			window.addEventListener('hashchange', function() {
				if (/commit/.test(location.hash)){
					isoTest.elementLoaded(isoTest.selector, function() {	
						isoTest.log('Test Ready!');	
		  				isoTest.chall();
					});
				}
			});
		},
		chall: function() {
			isoTest.log('fn:chall');
			
			// Add radio selects and section text
			var expeditedForm = document.querySelector('.expedited-form');
			var formContentWrap = document.createElement('div');
			formContentWrap.className = 'iso-expedited-header';
			formContentWrap.innerHTML = '<div class="error-container error-expedited-radio"><span class="error-prefix">ERROR:</span> Please make a selection.</div>\
				<h2 class="view-header"><span class="expedited-skip">Skip this section</span><span class="expedite-statc-text">Save Time At the Counter</span></h2>\
				<div class="expedited-disclaimer">\
					<div class="iso-expedited">\
						<div class="content">\
							<p>Add more rental details and <strong>spend less time at the counter.</strong></p>\
							<ul><li>No payment is needed and you won\'t be charged right now.</li><li>You can still cancel at any time.</li><li>It should only take a couple of minutes.</li></ul>\
						</div>\
						<div class="icon"><img src="/content/dam/ecom/hosted/ico-clock.png"></div>\
					</div>\
				</div>\
				<form class="expedited-option">\
					<p>Would you like to save time at the counter? *</p>\
					<span><input type="radio" name="group-1" value="yes" id="expedited-yes" class="expedited-radio" required><label for="expedited-yes">Yes, I\'d like to save time</label></span>\
					<span><input type="radio" name="group-1" value="no" id="expedited-no" class="expedited-radio"><label for="expedited-no">No, not today</label></span>\
					<input type="submit" value="" id="expedited-submit">\
				</form>\
				<div class="expedited-no-note">\
					<p>No problem. It will take a little longer to gather your information at the counter but we\'ll get you to your vehicle as quickly as we can.</p>\
				</div>\
				<div class="expedited-progress-bar">\
					<div class="epb-step epb-step-1"><p class="epb-1-2">Lookup Your Details</p><p class="epb-2-2">Verify/Complete Your Details</p></div><div class="epb-step epb-step-2"><p class="epb-1-2">Step 1 of 2</p><p class="epb-2-2">Step 2 of 2</p></div>\
				</div>';
			expeditedForm.parentNode.insertBefore( formContentWrap, expeditedForm );


			// Add duplicate reserve button & hide real reserve button
            var realSubmit = document.querySelector('#reviewSubmit');
            realSubmit.classList.add('hide');
            realSubmit.insertAdjacentHTML('afterend', '<button for="expedited-submit" class="btn submit expedited-submit">Reserve Now</button>');


			// Add error messages for spoofed personal info validation
            var personalInformation = document.getElementById('personal-information');
			var personalInfoErrorWrap = document.querySelector('.personal-entry-form .view-header');
			var personalInfoError = document.createElement('div');
			personalInfoError.className = 'personal-info-error-wrap';
        	personalInfoError.innerHTML = '<div class="error-container"><span class="error-prefix">ERROR:</span> Please complete the required fields.</div>';
        	personalInfoErrorWrap.parentNode.insertBefore( personalInfoError, personalInfoErrorWrap );


			// Set variables
			var expedited = document.getElementById('expedited');
            var expeditedRadio = document.querySelectorAll('.expedited-radio');
            var nextButton = document.querySelector('button.btn.save');
            var editButton = document.querySelector('.license-value .edit');
            var expeditedError = document.querySelector('.error-expedited-radio');
            var dupeSubmitButton = document.querySelector('.expedited-submit');
            var isoExpeditedHeader = document.querySelector('.iso-expedited-header');


			// Radio select logic, listen for input changes
            expeditedRadio.forEach((input) => {
                input.addEventListener('change', function(event) {
                    if (event.target.validity.valid) {
                        // Radio select chosen
                        expedited.classList.add('chose');
                        if (document.querySelector('#expedited.chose') && isoTest.isContactInfo) {
							// All contact details completed & radio chosen
							dupeSubmitButton.classList.add('hide');
							realSubmit.classList.remove('hide');
						}
                    }
                    if (event.target.matches('#expedited-yes')) {
                        // YES chosen
                        expedited.classList.add('chose-yes', 'expedited-step-1');
                        expedited.classList.remove('chose-no');
                        expeditedError.classList.remove('show');
                        isoTest.fireTag(this, 'Expedited Question: Yes');
                        expeditedForm.hidden = false;
                    } else {
                        // NO chosen
                        expedited.classList.add('chose-no');
                        expedited.classList.remove('chose-yes','expedited-step-1','expedited-step-2');
                        expeditedError.classList.remove('show');
                        isoTest.fireTag(this, 'Expedited Question: No');
                        expeditedForm.hidden = true;
                        if (document.querySelector('#expedited-skip-link')) {
	                    	document.getElementById('expedited-skip-link').click();
	                    }
                    }
                }, false);
            });
			

			// If user successfully proceeds to step 2 of expedited
            function stepTwoSuccess() {
            	// Determine new vs loyalty profile, repeat at set interval
				var timerId = setInterval(function() { 
					isoTest.log('tick');
					if(document.querySelector('#expedited-skip-link')) {
						expedited.classList.add('expedited-step-2');
						expedited.classList.remove('expedited-step-1');
						clearInterval(timerId);
						isoTest.log('stop new user');
					}
					if(document.querySelector('.expedited_verify-license-address')) {
						expedited.classList.add('expedited-step-2','expedited-returning');
						expedited.classList.remove('expedited-step-1');
						clearInterval(timerId);
						isoTest.log('stop loyalty user');
					}  
				}, 500);
				// Stop search after set time
				setTimeout( function() { 
					clearInterval(timerId); 
					isoTest.log('stop backup'); 
				}, 9000);
			}


			// Expedited logic for jumping between steps
			expedited.addEventListener('click', function(event) {
				// Proceeds to step 2
				if (event.target.matches('button.btn.save')) {
					stepTwoSuccess();
				}
                // Returns to step 1
                if (event.target.matches('.license-value .edit')) {
                    expedited.classList.add('expedited-step-1');
                    expedited.classList.remove('expedited-step-2');
                }
                // Skips step
                if (event.target.matches('.expedited-skip')) {
                    expedited.classList.add('chose-no');
                    expedited.classList.remove('chose-yes','expedited-step-1','expedited-step-2');
                    document.getElementById('expedited-no').checked = true;
                    if (document.querySelector('#expedited-skip-link')) {
                    	document.getElementById('expedited-skip-link').click();
                    }
                    document.getElementById('expedited-no').classList.add('pulse');
                    setTimeout(function() {
                        document.getElementById('expedited-no').classList.remove('pulse');
                    }, 700);
                    expeditedForm.hidden = true;
                }
            });


			// Prevent default error message if no radio select is chosen
	        var formError = document.querySelector('.expedited-option');
			for (var i = 0; i < formError.length; i++) {
			    formError[i].addEventListener('invalid', function(e) {
			        e.preventDefault();
			        // Custom error message
	            	expeditedError.classList.add('show');
			    }, true);
			}
			

			// Window click listeners
            window.addEventListener('click', function(event) {
            	// Logic for submissions & partial completion submissions if user selects 'go back and complete'
                // Warning: Step 1
                if (event.target.matches('.pre-expedite-warning .modal-buttons-container button:nth-child(2)')) {
					expedited.classList.add('chose-yes', 'expedited-step-2');
                    expedited.classList.remove('expedited-step-1');
                    expeditedForm.hidden = false;
                    document.querySelector('#expedited-yes').checked = true;
                }
                // Warning: Step 2
            	if (event.target.matches('.expedite__incomplete .modal-buttons-container button:nth-child(2)')) {
                	expedited.classList.add('chose-yes', 'expedited-step-2');
                    expedited.classList.remove('expedited-step-1');
                    expeditedForm.hidden = false;
                    document.querySelector('#expedited-yes').checked = true;
                }
                // Validation logic for dupe button clicks
                if (event.target.matches('.expedited-submit')) {
                	event.preventDefault();
                	isoTest.validate();
                }
            });


            // Personal info form, validate on focusout
            document.querySelector('.personal-entry-form').addEventListener('focusout', (event) => {
				isoTest.isContactInfo = isoTest.getContactInfoVal();
				isoTest.log('personal form focusout');
			  	if (isoTest.isContactInfo) {
			  		isoTest.log('personal form all fields complete');
			  		document.querySelector('.personal-info-error-wrap').classList.remove('show');
			  	}   
			});


		},
        validate : function(){
			isoTest.log('fn:validate');
			isoTest.isContactInfo = isoTest.getContactInfoVal();
			var piErrorWrap = document.querySelector('.personal-info-error-wrap');
			var expeditedChose = document.querySelector('#expedited.chose');
			var personalInfoSection = document.querySelector('#personal-information');
			var radioErrorMsg = document.querySelector('.error-expedited-radio');

			if (!document.getElementById('expedited') || document.getElementById('expedited') == undefined ) {
				// Submit form for logged-in loyalty user
				document.getElementById('reviewSubmit').click();
			} else if (expeditedChose && isoTest.isContactInfo) {
				// Personal info filled & radio chosen
				document.getElementById('reviewSubmit').click();
			} else if (!isoTest.isContactInfo && expeditedChose == undefined) {
				// Neither info complete
				window.scrollTo(0, personalInfoSection.offsetTop);
				piErrorWrap.classList.add('show');
				isoTest.validatePersonal();
				radioErrorMsg.classList.add('show');
			} else if (!isoTest.isContactInfo) {
				// Personal info not complete
				window.scrollTo(0, personalInfoSection.offsetTop);
				piErrorWrap.classList.add('show');
				isoTest.validatePersonal();
			} else if (isoTest.isContactInfo && expeditedChose == undefined ) {
				// Personal info complete but not radio chosen
				radioErrorMsg.classList.add('show');
				window.scrollTo(0, expedited.offsetTop);
				piErrorWrap.classList.add('hide');
			} 
		},
		validatePersonal: function(){
			var fname = document.querySelector('#firstName');
			var lname = document.querySelector('#lastName');
			var phone = document.querySelector('#phoneNumber');
			var email = document.querySelector('#email');

			if (fname.value.length == 0 ) {
				fname.classList.add('invalid');
			} 
			if (lname.value.length == 0 ) {
				lname.classList.add('invalid');
			}
			if (phone.value.length == 0 ) {
				phone.classList.add('invalid');
			}
			if (email.value.length == 0 ) {
				email.classList.add('invalid');
			}
		},
		getContactInfoVal : function(){
			var fname = Boolean(document.querySelector('#firstName').value);
			var lname = Boolean(document.querySelector('#lastName').value);
			var phone = Boolean(document.querySelector('#phoneNumber').value);
			var email = Boolean(document.querySelector('#email').value);

			return fname && lname && phone && email;
		},
        fireTag: function(element, value) {
            var linkName = value ? value : element.innerText;
            s.linkTrackVars = 'eVar89';
            s.eVar89 = linkName;
            s.tl(this, 'o', linkName);
        },
        elementLoaded: function(ele, callback) {
            isoTest.log('elementLoaded::  ' + ele + " - Checking...");
            window.clearTimeout(isoTest.eleTimer);
            if (document.querySelectorAll(ele).length > 0) {
                if (typeof callback === 'function') {
                    isoTest.log('elementLoaded::  ' + ele + " - Found!");
                    callback();
                }
            } else {
                isoTest.eleTimer = window.setTimeout(function() { isoTest.elementLoaded(ele, callback); }, 100);
            }
        },
        log: function(obj) {
            if (isoTest.debug === true) {
                console.log(obj);
            }
        }
    };
    isoTest.init();
})();</script>