<style>
button[data-dtm-tracking="cars|filter_modal|submit"]::before {
	content: 'Show ';
}
.vehicle-filter--alternative .vehicle-filter__header-link.btn {
	border: 0;
	text-decoration: underline;
}
.vehicle-filter--alternative .vehicle-filter__filter-list-item {
	background: #f3f3f3;
	border: 1px solid transparent;
	display: inline-flex;
	margin-right: 1em;
	outline: 1px solid #c3c3c3;
	padding: 6px 12px 2px 6px;
}
.vehicle-filter--alternative .vehicle-filter__filter-list-item.vehicle-filter__active-filter {
	border: 1px solid #169a5a;
	outline: 1px solid #169a5a;
}
.vehicle-filter--alternative .form-checkbox__control {
	height: auto;
	width: auto;
}
.vehicle-filter--alternative .form-checkbox__control::before {
	border: 1px solid #169a5a;
	margin-right: auto;
}
.vehicle-filter--alternative .form-checkbox__text {
	color: #169a5a;
	font-weight: 600;
	text-transform: uppercase;
}
.vehicle-filter--alternative [aria-labelledby="vehicle-type"] .vehicle-filter__price-indicator {
	display: block;
	margin-bottom: 6px;
    text-align: center;
    width: 100%;
}
.vehicle-filter--alternative [aria-labelledby="vehicle-type"] .vehicle-filter__price-indicator::before {
	content: 'From ';
}
.vehicle-filter--alternative [aria-labelledby="vehicle-type"] .vehicle-filter__filter-list-item {
	min-width: 170px;
}
.vehicle-filter--alternative [aria-labelledby="vehicle-type"] .form-checkbox__text {
	position: absolute;
    left: 50%;
    transform: translate(-50%, 0%);
}
.vehicle-filter--alternative [aria-labelledby="vehicle-type"] .vehicle-filter__filter-list-item label {
	width: 100%;
}
.vehicle-filter--alternative [data-dtm-tracking*="car_filters|Passenger Vans"] .form-checkbox__text {
	left: 60%;
	white-space: nowrap;
}
.vehicle-filter--alternative .vehicle-filter__price-indicator {
	color: #333;
	display: none;
	font-weight: 300;
}
.vehicle-filter--alternative .form-checkbox__input+.form-checkbox__control::after {
	color: #169a5a;
	content: '+';
	font-size: 22px;
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
}
.vehicle-filter--alternative .form-checkbox__input:checked+.form-checkbox__control::after {
	content: '';
}
.iso-filters-active {
	border-bottom: 1px solid #c3c3c3;
	padding: 0 1.25rem;
}
.iso-filters-active > a {
	border: 1px solid #169a5a;
	border-radius: 20px;
	cursor: pointer;
	color: #169a5a;
	display: inline-block;
	font-size: 14px;
	font-weight: 500;
	margin: 10px 1rem 0 0;
    padding: 5px 30px 5px 10px;
    position: relative;
    text-transform: uppercase;
}
.iso-filters-active > a:last-of-type {
	margin-bottom: 10px;
}
.iso-filters-active > a::after {
	content: '+';
    font-size: 38px;
    font-weight: 300;
    transform: rotate(45deg);
    position: absolute;
    top: -10px;
    right: 7px;
}
/* Chall 2 Specific */
.iso-filters .vehicle-filter__filter:last-child {
	border-bottom: 1px solid #c3c3c3;
}
.iso-filters .vehicle-filter__filter {
	padding: 1rem 1.25rem;
}
.vehicle-filter--alternative .vehicle-filter__filter {
	cursor: pointer;
}
.vehicle-filter__list-content {
	transition: all .5s ease;
}
.iso-cte-expanded .vehicle-filter__list-content {
	max-height: 1000px;
	opacity: 1;
	visibility: visible;
}
.iso-cte-collapsed .vehicle-filter__list-content {
    max-height: 0;
    opacity: 0;
    visibility: hidden;
}
.vehicle-filter__filter-header::after {
	transition: all .5s ease;
}
.iso-cte-collapsed .vehicle-filter__filter-header {
	margin-bottom: 0;
	transition: all 1s ease;
}
.iso-cte-collapsed .vehicle-filter__filter-header::after {
	background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNC45IDE0LjciPjxwYXRoIGQ9Im0xNC4zIDQuOC0xLjItMS4yYy0uMi0uMi0uNC0uMi0uNiAwbC01IDUuMS01LjItNS4xYy0uMi0uMi0uNC0uMi0uNiAwTC42IDQuOGMtLjIuMi0uMi40IDAgLjZsNS4zIDUuM3MwIC4xLjEuMUw3LjIgMTJjLjIuMi40LjIuNiAwTDkgMTAuOGw1LjQtNS40Yy4xLS4yLjEtLjQtLjEtLjZ6IiBzdHlsZT0iZmlsbDojMTY5YTVhIi8+PC9zdmc+);
	background-size: 100%;
	content: '';
	position: absolute;
	right: 1.25rem;
	height: 13px;
	width: 13px;
}
.iso-cte-expanded .vehicle-filter__filter-header::after {
	background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNC45IDE0LjciPjxwYXRoIGQ9Im0xNC4zIDQuOC0xLjItMS4yYy0uMi0uMi0uNC0uMi0uNiAwbC01IDUuMS01LjItNS4xYy0uMi0uMi0uNC0uMi0uNiAwTC42IDQuOGMtLjIuMi0uMi40IDAgLjZsNS4zIDUuM3MwIC4xLjEuMUw3LjIgMTJjLjIuMi40LjIuNiAwTDkgMTAuOGw1LjQtNS40Yy4xLS4yLjEtLjQtLjEtLjZ6IiBzdHlsZT0iZmlsbDojMTY5YTVhIi8+PC9zdmc+);
	background-size: 100%;
	content: '';
	position: absolute;
	right: 1.25rem;
	height: 13px;
	width: 13px;
	transform: rotate(180deg);
}

</style>
<script>
(function() {
	'use strict';
	var isoTest = {
		account : 'EHI',
		portfolio : 'Enterprise',
		test : 'Vehicle Selection Filters Redesign 3.0',
		creative : 'Challenger 2',
		selector : '.ReactModalPortal',
		globalEvents : '',
		init : function() {

			isoTest.debug = ${user.mvtDebug};
			
			if (_satellite && typeof _satellite.setVar === 'function' && typeof _satellite.track === 'function') {
				_satellite.setVar('TargetCampaign', isoTest.test);
				_satellite.setVar('TargetCreative', isoTest.creative);
			}

			isoTest.log('Test Running...');
			isoTest.log(isoTest.account + ' - ' + isoTest.portfolio);
			isoTest.log(isoTest.test + ' - ' + isoTest.creative);

			helpers.elementLoaded(isoTest.selector, function() {
				isoTest.log('Test Ready!');
  				isoTest.chall();
			});
			
		window.addEventListener('hashchange', isoTest.viewChange, false);
		
		},
		viewChange : function(){
			if(/cars/.test(location.hash)){
				helpers.elementLoaded(isoTest.selector, function() {
					isoTest.chall();
				});
			}
		},
		chall : function() {

			if (isoTest.globalEvents !== true) {
				isoTest.globalEvents = true;
				isoTest.clickEvents();
				isoTest.keyEvents();
			}
			
			var observer = new MutationObserver(function(mutations) {
			    mutations.forEach(function(mutation) {
			    	if ($('.vehicle-filter--alternative')) {
			    		if (!$('.iso-filters-active')) {

			    			$('.vehicle-filter--alternative:nth-of-type(2)').classList.add('iso-filters');	
			    			$('.iso-filters .vehicle-filter__header').insertAdjacentHTML('afterend','<div class="iso-filters-active"></div>');

			    			var filterWrap = $$('.iso-filters .vehicle-filter__filter');
			    			filterWrap.forEach(function(filterGroup) {
			    				filterGroup.classList.add('iso-cte-collapsed');
			    				filterGroup.tabIndex = 0;
			    			});

			    			isoTest.filterCheck();

			    		}
			    		isoTest.filterCheck();
			    	}
			    });
			});
			observer.observe($('.ReactModalPortal'), {childList: true, subtree: true, attributes: true});

		},
		filterCheck: function() {
			if ($('[value="Unlimited Mileage"]:checked')) {
				if (!$('.ifa-unlimited')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-unlimited" tabindex="0" aria-label="Remove Unlimited Mileage Filter">Unlimited Mileage</a>');
				}
			} else if ($('[value="Unlimited Mileage"]:not(:checked)')) {
				if ($('.ifa-unlimited')) {
					$('.ifa-unlimited').remove();
				}
			}
			if ($('[value="Limited Mileage"]:checked')) {
				if (!$('.ifa-limited')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-limited" tabindex="0" aria-label="Remove Limited Mileage Filter">Limited Mileage</a>');
				}
			} else if ($('[value="Limited Mileage"]:not(:checked)')) {
				if ($('.ifa-limited')) {
					$('.ifa-limited').remove();
				}
			}
			if ($('[value="Cars"]:checked')) {
				if (!$('.ifa-cars')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-cars" tabindex="0" aria-label="Remove Cars Filter">Cars</a>');
				}
			} else if ($('[value="Cars"]:not(:checked)')) {
				if ($('.ifa-cars')) {
					$('.ifa-cars').remove();
				}
			}
			if ($('[value="SUVs"]:checked')) {
				if (!$('.ifa-suvs')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-suvs" tabindex="0" aria-label="Remove SUV Filter">SUVs</a>');
				}
			} else if ($('[value="SUVs"]:not(:checked)')) {
				if ($('.ifa-suvs')) {
					$('.ifa-suvs').remove();
				}
			}
			if ($('[value="Trucks"]:checked')) {
				if (!$('.ifa-trucks')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-trucks" tabindex="0" aria-label="Remove Trucks Filter">Trucks</a>');
				}
			} else if ($('[value="Trucks"]:not(:checked)')) {
				if ($('.ifa-trucks')) {
					$('.ifa-trucks').remove();
				}
			}
			if ($('[value="Vans"]:checked')) {
				if (!$('.ifa-vans')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-vans" tabindex="0" aria-label="Remove Vans Filter">Vans</a>');
				}
			} else if ($('[value="Vans"]:not(:checked)')) {
				if ($('.ifa-vans')) {
					$('.ifa-vans').remove();
				}
			}
			if ($('[value="Passenger Vans"]:checked')) {
				if (!$('.ifa-passvans')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-passvans" tabindex="0" aria-label="Remove Passenger Vans Filter">Passenger Vans</a>');
				}
			} else if ($('[value="Passenger Vans"]:not(:checked)')) {
				if ($('.ifa-passvans')) {
					$('.ifa-passvans').remove();
				}
			}
			if ($('[value="2"]:checked')) {
				if (!$('.ifa-2')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-2" tabindex="0" aria-label="Remove 2+ Passenger Filter">2+ Passengers</a>');
				}
			} else if ($('[value="2"]:not(:checked)')) {
				if ($('.ifa-2')) {
					$('.ifa-2').remove();
				}
			}
			if ($('[value="3"]:checked')) {
				if (!$('.ifa-3')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-3" tabindex="0" aria-label="Remove 3+ Passenger Filter">3+ Passengers</a>');
				}
			} else if ($('[value="3"]:not(:checked)')) {
				if ($('.ifa-3')) {
					$('.ifa-3').remove();
				}
			}
			if ($('[value="4"]:checked')) {
				if (!$('.ifa-4')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-4" tabindex="0" aria-label="Remove 4+ Passenger Filter">4+ Passengers</a>');
				}
			} else if ($('[value="4"]:not(:checked)')) {
				if ($('.ifa-4')) {
					$('.ifa-4').remove();
				}
			}
			if ($('[value="5"]:checked')) {
				if (!$('.ifa-5')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-5" tabindex="0" aria-label="Remove 5+ Passenger Filter">5+ Passengers</a>');
				}
			} else if ($('[value="5"]:not(:checked)')) {
				if ($('.ifa-5')) {
					$('.ifa-5').remove();
				}
			}
			if ($('[value="7"]:checked')) {
				if (!$('.ifa-7')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-7" tabindex="0" aria-label="Remove 7+ Passenger Filter">7+ Passengers</a>');
				}
			} else if ($('[value="7"]:not(:checked)')) {
				if ($('.ifa-7')) {
					$('.ifa-7').remove();
				}
			}
			if ($('[value="8"]:checked')) {
				if (!$('.ifa-8')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-8" tabindex="0" aria-label="Remove 8+ Passenger Filter">8+ Passengers</a>');
				}
			} else if ($('[value="8"]:not(:checked)')) {
				if ($('.ifa-8')) {
					$('.ifa-8').remove();
				}
			}
			if ($('[value="9"]:checked')) {
				if (!$('.ifa-9')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-9" tabindex="0" aria-label="Remove 9+ Passenger Filter">9+ Passengers</a>');
				}
			} else if ($('[value="9"]:not(:checked)')) {
				if ($('.ifa-9')) {
					$('.ifa-9').remove();
				}
			}
			if ($('[value="12"]:checked')) {
				if (!$('.ifa-12')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-12" tabindex="0" aria-label="Remove 12+ Passenger Filter">12+ Passengers</a>');
				}
			} else if ($('[value="12"]:not(:checked)')) {
				if ($('.ifa-12')) {
					$('.ifa-12').remove();
				}
			}
			if ($('[value="15"]:checked')) {
				if (!$('.ifa-15')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-15" tabindex="0" aria-label="Remove 15+ Passenger Filter">15+ Passengers</a>');
				}
			} else if ($('[value="15"]:not(:checked)')) {
				if ($('.ifa-15')) {
					$('.ifa-15').remove();
				}
			}
			if ($('[value="Automatic"]:checked')) {
				if (!$('.ifa-automatic')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-automatic" tabindex="0" aria-label="Remove Automatic Transmission Filter">Automatic</a>');
				}
			} else if ($('[value="Automatic"]:not(:checked)')) {
				if ($('.ifa-automatic')) {
					$('.ifa-automatic').remove();
				}
			}
			if ($('[value="Manual"]:checked')) {
				if (!$('.ifa-manual')) {
					$('.iso-filters-active').insertAdjacentHTML('beforeend','<a class="ifa-manual" tabindex="0" aria-label="Remove Manual Transmission Filter">Manual</a>');
				}
			} else if ($('[value="Manual"]:not(:checked)')) {
				if ($('.ifa-manual')) {
					$('.ifa-manual').remove();
				}
			}
		},
		events: function(event) {
			// Checkbox selected/unselected
			if (event.target.closest('.iso-filters .vehicle-filter__filter-list-item label')) {
				var checkboxName = event.target.closest('label').querySelector('.form-checkbox__text').innerText;
				setTimeout(function(){
					if (event.target.closest('.iso-filters input:checked')) {
						isoTest.fireTag89('', checkboxName+' Filter Checked');
					} else
					if (event.target.closest('.iso-filters input:not(:checked)')) {
						isoTest.fireTag89('', checkboxName+' Filter Unchecked');
					}
				}, 500);
			}

			if (event.target.matches('.iso-cte-collapsed') || event.target.closest('.iso-cte-collapsed .vehicle-filter__filter-header')) {
				event.target.closest('.iso-cte-collapsed').classList.add('iso-cte-expanded');
				event.target.closest('.iso-cte-collapsed').classList.remove('iso-cte-collapsed');
				// Filter title
				if (event.target.querySelector('#transmission')) {
					isoTest.fireTag89('','Filter Type: Transmission Open');
				} else
				if (event.target.querySelector('#mileage')) {
					isoTest.fireTag89('','Filter Type: Mileage Open');
				} else
				if (event.target.querySelector('#vehicle-type')) {
					isoTest.fireTag89('','Filter Type: Vehicle Open');
				} else
				if (event.target.querySelector('#number-of-passengers')) {
					isoTest.fireTag89('','Filter Type: Passengers Open');
				}
			} else
			if (event.target.closest('.iso-cte-expanded') && !event.target.closest('.vehicle-filter__filter-list-item')) {
				event.target.closest('.iso-cte-expanded').classList.add('iso-cte-collapsed');
				event.target.closest('.iso-cte-expanded').classList.remove('iso-cte-expanded');
				if (!event.target.closest('.vehicle-filter__filter-list-item')) {
					if (event.target.closest('.iso-filters .vehicle-filter__filter')) {

						if (event.target.querySelector('#transmission')) {
							isoTest.fireTag89('','Filter Type: Transmission Close');
						} else
						if (event.target.querySelector('#mileage')) {
							isoTest.fireTag89('','Filter Type: Mileage Close');
						} else
						if (event.target.querySelector('#vehicle-type')) {
							isoTest.fireTag89('','Filter Type: Vehicle Close');
						} else
						if (event.target.querySelector('#number-of-passengers')) {
							isoTest.fireTag89('','Filter Type: Passengers Close');
						}

					}
				}
			}

			// If the event target doesn't match, bail
			if (!event.target.closest('.iso-filters-active > a')) return; 
			// Bubble removal
			if (event.target.closest('.ifa-unlimited')) {
				$('[value="Unlimited Mileage"]').click();
				isoTest.fireTag89('','Unlimited Bubble Removed');
			} else
			if (event.target.closest('.ifa-limited')) {
				$('[value="Limited Mileage"]').click();
				isoTest.fireTag89('','Limited Bubble Removed');
			} else
			if (event.target.closest('.ifa-suvs')) {
				$('[value="SUVs"]').click();
				isoTest.fireTag89('','SUVs Bubble Removed');
			} else
			if (event.target.closest('.ifa-cars')) {
				$('[value="Cars"]').click();
				isoTest.fireTag89('','Cars Bubble Removed');
			} else
			if (event.target.closest('.ifa-trucks')) {
				$('[value="Trucks"]').click();
				isoTest.fireTag89('','Trucks Bubble Removed');
			} else
			if (event.target.closest('.ifa-vans')) {
				$('[value="Vans"]').click();
				isoTest.fireTag89('','Vans Bubble Removed');
			} else
			if (event.target.closest('.ifa-passvans')) {
				$('[value="Passenger Vans"]').click();
				isoTest.fireTag89('','Passenger Vans Bubble Removed');
			} else
			if (event.target.closest('.ifa-2')) {
				$('[value="2"]').click();
				isoTest.fireTag89('','2+ Bubble Removed');
			} else
			if (event.target.closest('.ifa-3')) {
				$('[value="3"]').click();
				isoTest.fireTag89('','3+ Bubble Removed');
			} else
			if (event.target.closest('.ifa-4')) {
				$('[value="4"]').click();
				isoTest.fireTag89('','4+ Bubble Removed');
			} else
			if (event.target.closest('.ifa-5')) {
				$('[value="5"]').click();
				isoTest.fireTag89('','5+ Bubble Removed');
			} else
			if (event.target.closest('.ifa-7')) {
				$('[value="7"]').click();
				isoTest.fireTag89('','7+ Bubble Removed');
			} else
			if (event.target.closest('.ifa-8')) {
				$('[value="8"]').click();
				isoTest.fireTag89('','8+ Bubble Removed');
			} else
			if (event.target.closest('.ifa-9')) {
				$('.vehicle-filter--alternative [value="9"]').click();
				isoTest.fireTag89('','9+ Bubble Removed');
			} else
			if (event.target.closest('.ifa-12')) {
				$('[value="12"]').click();
				isoTest.fireTag89('','12+ Bubble Removed');
			} else
			if (event.target.closest('.ifa-15')) {
				$('[value="15"]').click();
				isoTest.fireTag89('','15+ Bubble Removed');
			} else
			if (event.target.closest('.ifa-automatic')) {
				$('[value="Automatic"]').click();
				isoTest.fireTag89('','Automatic Bubble Removed');
			} else
			if (event.target.closest('.ifa-manual')) {
				$('[value="Manual"]').click();
				isoTest.fireTag89('','Manual+ Bubble Removed');
			}
		},
		clickEvents : function() {
			document.addEventListener('click', function (event) {
				isoTest.events(event);
			}, false);
		},
		keyEvents : function() {
			document.addEventListener('keydown', function (event) {
				if (event.key === 'Enter' || event.key === ' ') {
					isoTest.events(event);
				}
			});
		},
		fireTag89 : function(element, value) {
			var linkName = value ? value : element.innerText;
				linkName = isoTest.test ? isoTest.test + ' : ' + linkName : linkName;
			s.linkTrackVars = 'eVar89';
			s.eVar89 = linkName;
			s.tl(this, 'o', linkName);
		},
		log : function(obj){
			if(isoTest.debug === true){
				console.log(obj);
			}
		}
	};

	var helpers = {
		elementLoaded : function (ele, callback) {
			isoTest.log('elementLoaded::  ' + ele + ' - Checking...');
			window.clearTimeout(isoTest.eleTimer);
			if (document.querySelectorAll(ele).length > 0) {
				if (typeof callback === 'function') {
					isoTest.log('elementLoaded::  ' + ele + ' - Found!');
					callback();
				}
	        } else {
	            isoTest.eleTimer = window.setTimeout(function(){helpers.elementLoaded(ele, callback);}, 100);
	        }
		},
	};

	var $ = document.querySelector.bind(document);
	var $$ = document.querySelectorAll.bind(document);

	isoTest.init();
})();
</script>