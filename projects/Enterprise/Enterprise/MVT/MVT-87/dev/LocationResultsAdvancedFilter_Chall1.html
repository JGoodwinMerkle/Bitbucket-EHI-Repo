<style>
.iso-modal-open { 
	height: 100%; 
	overflow: hidden;
}

.iso-modal.iso-location-filters-modal {
	display: none;
}

.iso-modal.iso-location-filters-modal.active {
	display: block;
}

.iso-modal.iso-location-filters-modal .location-search-filters-modal__description {
	font-weight: 400;
  font-style: normal;
  font-size: 14px;
  margin-bottom: 18px;
}

.iso-modal.iso-location-filters-modal .ReactModal__Content--after-open.default-modal .modal-content .checkbox__label-checkbox {
	width: 24px;
	height: 24px;
}

.iso-modal.iso-location-filters-modal .ReactModal__Content--after-open.default-modal .modal-content .location-search-filters-modal__location-search-list li {
	padding-bottom: 16px;
}

.iso-modal.iso-location-filters-modal .ReactModal__Content--after-open.default-modal .modal-content .checkbox__label  {
	position: relative;
}

.iso-modal.iso-location-filters-modal .checkbox__label  .checkbox__text .icon {
	display: inline-block;
	margin-left: 8px;
	position: absolute;
}

.iso-modal.iso-location-filters-modal .checkbox__label  .checkbox__text .icon {

}

.iso-modal.iso-location-filters-modal .location-search-filters-modal__header {
	position: relative;
}

.iso-modal.iso-location-filters-modal .location-search-filters-modal__clear-all.btn {
	font-weight: 700;
  font-style: normal;
  position: absolute;
  top: .375rem;
  right: -.25rem;
  padding: .25rem;
  text-transform: uppercase;
  text-decoration: underline;
  font-size: .875rem;
  color: #169a5a;
}

#location-search-filter-1  .location-search-filter__container-content {
	width: 100%;
}

#location-search-filter-1 .location-search-filter__container-content-header {
  display: inline-block;
}

#location-search-filter-1 .location-search-filter__vehicle-filter {
	display: inline-block;
	margin-left: 66px;
}

#location-search-filter-1 .location-search-filter__vehicle-filter .vehicle-filters-trigger__label-text {
	font-weight: 600;
}

#location-search-filter-1 .location-search-filter__container-filter.form-checkbox__label,
#location-search-filter-1 .location-search-filter__container-filter.form-checkbox__label #location-search-open-time-filter,
#location-search-filter-1 .location-search-filter__container-filter.form-checkbox__label .form-checkbox__text {
	display: inline-block;
}

#location-search-filter-1  .location-search-filter__container-content-text {
  margin-top: 15px;
  margin-bottom: 0;
}

#location-search-filter-1 .location-search-filter__location-type-filter {
	display: inline-block;
  margin-left: 30px;
  min-width: 12.5rem;
/*  margin: 0 0 0 2.1875rem;*/
}


#location-search-filter-1 .location-search-filter__location-type-filter .location-type-filters-trigger__label {
	margin-top: 0;
	padding-bottom: 0;
}


#location-search-filter-1 .location-search-filter__location-type-filter .location-type-filters-trigger__label .location-type-filters-trigger__label-text {
	font-weight: 600;
	font-style: normal;
  display: inline-block;
  font-size: .9375rem;
  text-transform: uppercase;
}


#location-search-filter-1 .location-search-filter__location-type-filter .location-type-filters-trigger__button {
  height: 3.125rem;
  font-weight: 600;
  font-style: normal;
  margin-top: .1875rem;
  position: relative;
}

#location-search-filter-1 .location-search-filter__location-type-filter .location-type-filters-trigger__button.btn .icon {
	position: absolute;
  top: 50%;
  transform: translateY(-50%) rotate(-90deg);
  right: .375rem;
  height: .75rem;
  width: .75rem;
}

#location-search-filter-1 {
	
}

#location-search-filter-1 {
	
}

#location-search-filter-1 {
	
}

#location .search-results-wrapper .search-results ul .location-result-item.iso-hidden {
	display: none;
}
</style>
<script>
(function() {
	'use strict';
	var isoTest = {
		account : 'Enterprise',
		portfolio : 'Enterprise.com',
		test : 'Location Results Advanced Filter',
		creative : 'Challenger 1',
		selector: '#location-search-filter-1 .location-search-filter__container-content',
		mapSelector: 'img[src*="ENT-mappin-single-number-enterprise@2x"]',
		selectorLocations: '#location .search-results-wrapper .search-results ul .location-result-item',
		mapChangeSelector: '[aria-live=off]',
		content: '<div class="location-type-filters-trigger location-search-filter__location-type-filter">\
								<label class="location-type-filters-trigger__label" for="location-type-filters-trigger">\
									<span class="location-type-filters-trigger__label-text">LOCATION TYPE</span>\
								</label>\
								<button class="btn location-type-filters-trigger__button btn-input" tabindex="0" type="button" role="button" name="location-type-filters-trigger">All Locations<i class="icon icon-nav-carrot-down"></i></button>\
							</div>',
		modal: '<div class="iso-location-filters-modal iso-modal" >\
							<div class="ReactModal__Overlay ReactModal__Overlay--after-open modal-overlay fixed-overlay" aria-modal="true">\
								<div class="ReactModal__Content ReactModal__Content--after-open default-modal fixed-scroll-modal" tabindex="-1" role="dialog" aria-describedby="modal-context">\
									<div class="modal-inner">\
										<div class="modal-header">\
											<button class="close-modal" aria-label="Close" role="button" type="button"><i class="icon icon-close-x-white" aria-hidden="true">X</i></button>\
										</div>\
										<div class="modal-content cf">\
											<div class="location-search-filters-modal" id="modal-context">\
												<div class="location-search-filters-modal__header">\
													<h2 class="location-search-filters-modal__title">Location Type</h2>\
													<button class="btn location-search-filters-modal__clear-all btn-unstyled iso-clear-location-filter" tabindex="0" type="button" role="button">Clear All</button>\
												</div>\
												<p class="location-search-filters-modal__description">Select the location type(s) you want to search by.</p>\
												<div class="location-search-filters-modal__location-search-list">\
													<ul>\
														<li>\
															<label class="checkbox__label " tabindex="0" id="checkbox_location_1" aria-checked="false" role="checkbox">\
																<span class="checkbox__label-checkbox">\
																	<input class="location-type-checkbox" type="checkbox" name="location-search" value="Exotics Locations">\
																	<i class="icon icon-check-green"></i>\
																</span>\
																<span class="checkbox__text">Exotics Locations<i class="icon location-type-icon icon-icon-exotics" aria-label="Exotics"></i></span>\
															</label>\
														</li>\
														<li>\
															<label class="checkbox__label " tabindex="0" id="checkbox_location_2" aria-checked="false" role="checkbox">\
																<span class="checkbox__label-checkbox">\
																	<input class="location-type-checkbox" type="checkbox" name="location-search" value="Airport Locations">\
																	<i class="icon icon-check-green"></i>\
																</span>\
																<span class="checkbox__text">Airport Locations<i class="icon location-type-icon icon-location-airport" aria-label="Airport"></i></span>\
															</label>\
														</li>\
														<li>\
															<label class="checkbox__label " tabindex="0" id="checkbox_location_3" aria-checked="false" role="checkbox">\
																<span class="checkbox__label-checkbox">\
																	<input class="location-type-checkbox" type="checkbox" name="location-search" value="Port Locations">\
																	<i class="icon icon-check-green"></i>\
																</span>\
																<span class="checkbox__text">Port Locations<i class="icon location-type-icon icon-location-port_of_call" aria-label="Port of Call"></i></span>\
															</label>\
														</li>\
														<li>\
															<label class="checkbox__label " tabindex="0" id="checkbox_location_4" aria-checked="false" role="checkbox">\
																<span class="checkbox__label-checkbox">\
																	<input class="location-type-checkbox" type="checkbox" name="location-search" value="Train Station Locations">\
																	<i class="icon icon-check-green"></i>\
																</span>\
																<span class="checkbox__text">Train Station Locations<i class="icon location-type-icon icon-location-rail" aria-label="Rail"></i></span>\
															</label>\
														</li>\
														<li>\
															<label class="checkbox__label " tabindex="0" id="checkbox_location_5" aria-checked="false" role="checkbox">\
																<span class="checkbox__label-checkbox">\
																	<input class="location-type-checkbox" type="checkbox" name="location-search" value="City Locations">\
																	<i class="icon icon-check-green"></i>\
																</span>\
																<span class="checkbox__text">City Locations<i class="icon location-type-icon icon-location-city" aria-label="City"></i></span>\
															</label>\
														</li>\
													</ul>\
												</div>\
											</div>\
											<div class="modal-buttons-container ">\
												<button class="btn modal-button iso-modal-cancel" type="button" role="button">Cancel</button>\
												<button class="btn modal-button iso-modal-apply" type="button" role="button">Apply</button>\
											</div>\
										</div>\
								  </div>\
								</div>\
							</div>\
						</div>',
		tabbableElements : 'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]',
		exoticsLocations : 'false',
		airportLocations : 'false',
		portLocations : 'false',
		trainLocations: 'false',
		cityLocations: 'false',
		exoticsImage : 'exotics',
		airportImage : 'airport',
		portImage : 'port_of_call',
		trainImage : 'rail',
		cityImage : 'enterprise',
		filtersListItems : '',
		init : function() {

			isoTest.debug = ${user.mvtDebug};
			
			if (_satellite && typeof _satellite.setVar === 'function' && typeof _satellite.track === 'function') {
				_satellite.setVar('TargetCampaign', isoTest.test);
				_satellite.setVar('TargetCreative', isoTest.creative);
				//_satellite.track('target_variables');
			}

			isoTest.log('Test Running...');
			isoTest.log(isoTest.account + ' - ' + isoTest.portfolio);
			isoTest.log(isoTest.test + ' - ' + isoTest.creative);

			helpers.elementLoaded(isoTest.selector, function() {
				isoTest.log('Test Ready!');
  				isoTest.chall();
			});
			
		window.addEventListener('hashchange', isoTest.viewChange, false);
		
		},
		viewChange : function(){
			if(/location/.test(location.hash)){
				helpers.elementLoaded(isoTest.selector, function() {
					isoTest.chall();
				});
			}
		},
		chall : function() {
			isoTest.log('chall()');

			isoTest.addLocationFilter();
			isoTest.addFilterModal();

			isoTest.addEvents();
		},
		checkForFilters : function(movement) {
			isoTest.log("checkForFilters()");
			var checkedLocations = document.querySelectorAll('.checkbox__label-checkbox');

			if (document.querySelectorAll('.checkbox__label-checkbox.checked').length > 0) {
				isoTest.log('location filters checked');
				for(var i = 0; i < checkedLocations.length; i++) {
					if (!checkedLocations[i].classList.contains('checked')) {
						if (checkedLocations[i].parentNode.id == "checkbox_location_1") {
							isoTest.log("checkbox_location_1");
							isoTest.exoticsLocations = 'false';
							if (movement == "drag") {
								isoTest.updateImages(isoTest.exoticsImage);
							} else {
								isoTest.updatePage(isoTest.exoticsImage);
							}
						}

						if (checkedLocations[i].parentNode.id == "checkbox_location_2") {
							isoTest.log("checkbox_location_2");
							isoTest.airportLocations = 'false';
							if (movement == "drag") {
								isoTest.updateImages(isoTest.airportImage);
							} else {
								isoTest.updatePage(isoTest.airportImage);
							}
						}

						if (checkedLocations[i].parentNode.id == "checkbox_location_3") {
							isoTest.log("checkbox_location_3");
							isoTest.portLocations = 'false';
							if (movement == "drag") {
								isoTest.updateImages(isoTest.portImage);
							} else {
								isoTest.updatePage(isoTest.portImage);
							}
						}

						if (checkedLocations[i].parentNode.id == "checkbox_location_4") {
							isoTest.log("checkbox_location_4");
							isoTest.trainLocations = 'false';
							if (movement == "drag") {
								isoTest.updateImages(isoTest.trainImage);
							} else {
								isoTest.updatePage(isoTest.trainImage);
							}
						}

						if (checkedLocations[i].parentNode.id == "checkbox_location_5") {
							console.log("checkbox_location_5");
							isoTest.cityLocations = 'false';
							if (movement == "drag") {
								isoTest.updateCityImages();
							} else {
								isoTest.updateCityFilter();
							}
						}	
					} else {
						if (checkedLocations[i].parentNode.id == "checkbox_location_1") {
							isoTest.log("checkbox_location_1 true");
							isoTest.exoticsLocations = 'true';
							isoTest.removeUpdate(isoTest.exoticsImage);
						}

						if (checkedLocations[i].parentNode.id == "checkbox_location_2") {
							isoTest.log("checkbox_location_2 true");
							isoTest.airportLocations = 'true';
							isoTest.removeUpdate(isoTest.airportImage);
						}

						if (checkedLocations[i].parentNode.id == "checkbox_location_3") {
							isoTest.log("checkbox_location_3 true");
							isoTest.portLocations = 'true';
							isoTest.removeUpdate(isoTest.portImage);
						}

						if (checkedLocations[i].parentNode.id == "checkbox_location_4") {
							isoTest.log("checkbox_location_4 true");
							isoTest.trainLocations = 'true';
							isoTest.removeUpdate(isoTest.trainImage);
						}

						if (checkedLocations[i].parentNode.id == "checkbox_location_5") {
							console.log("checkbox_location_5 true");
							isoTest.cityLocations = 'true';
							isoTest.removeCityFilter();
						}	
					}
				}
			} else {
				isoTest.log('no location filters checked');
				isoTest.exoticsLocations = 'false';
				isoTest.airportLocations = 'false';
				isoTest.portLocations = 'false';
				isoTest.trainLocations = 'false';
				isoTest.cityLocations = 'false';
				isoTest.removeUpdate(isoTest.exoticsImage);
				isoTest.removeUpdate(isoTest.airportImage);
				isoTest.removeUpdate(isoTest.portImage);
				isoTest.removeUpdate(isoTest.trainImage);
				isoTest.removeCityFilter();
			}

			isoTest.updateOrder();
		},
		checkForReloaded : function() {
			isoTest.log("checkForReloaded()");
			var checkedLocations = document.querySelectorAll('.checkbox__label-checkbox');

			if (document.querySelectorAll('.checkbox__label-checkbox.checked').length > 0) {
				for(var i = 0; i < checkedLocations.length; i++) {
					if (!checkedLocations[i].classList.contains('checked')) {
						if (checkedLocations[i].parentNode.id == "checkbox_location_1") {
							isoTest.log("checkbox_location_1 reload");
							isoTest.mapReloaded(isoTest.exoticsImage);
						}

						if (checkedLocations[i].parentNode.id == "checkbox_location_2") {
							isoTest.log("checkbox_location_2 reload");
							isoTest.mapReloaded(isoTest.airportImage);
						}

						if (checkedLocations[i].parentNode.id == "checkbox_location_3") {
							isoTest.log("checkbox_location_3 reload");
							isoTest.mapReloaded(isoTest.portImage);
						}

						if (checkedLocations[i].parentNode.id == "checkbox_location_4") {
							isoTest.log("checkbox_location_4 reload");
							isoTest.mapReloaded(isoTest.trainImage);
						}

						if (checkedLocations[i].parentNode.id == "checkbox_location_5") {
							isoTest.log("checkbox_location_5 reload");
							isoTest.cityMapReloaded();
						}
					}
				}
			}

			isoTest.updateOrder();
		},
		updateImages : function(itemImage) {
			isoTest.log("updateImages()");
			var images = document.querySelectorAll('img[src*="'+itemImage+'"]');
			if (images.length > 0 ) {
				for(var i = 0; i < images.length; i++) {
					images[i].parentNode.style.display = 'none';
					images[i].style.display = 'none';
				}
			}
		},
		updateCityImages : function() {
			isoTest.log("updateImages()");
			var images = document.querySelectorAll(isoTest.mapSelector);
			if (images.length > 0 ) {
				for(var i = 0; i < images.length; i++) {
					images[i].parentNode.style.display = 'none';
					images[i].style.display = 'none';
				}
			}
		},
		mapReloaded : function(itemImage) {
			isoTest.log("mapReloaded()");
			if (document.querySelectorAll('img[src*="'+itemImage+'"]').length > 0) {
				isoTest.updatePage(itemImage);
			}
		},
		cityMapReloaded : function() {
			isoTest.log("cityMapReloaded()");
			if (document.querySelectorAll(isoTest.mapSelector).length > 0) {
				isoTest.updateCityFilter();
			}
		},
		updatePage : function(image) {
			isoTest.log('updatePage()');
			helpers.elementLoaded(isoTest.selectorLocations, function() {
				helpers.elementLoaded(isoTest.mapSelector, function() {
					// var allLocations = document.querySelectorAll('#location .search-results-wrapper .search-results ul .location-result-item.active');
					var allLocations = document.querySelectorAll('#location .search-results-wrapper .search-results ul .location-result-item');

					for(var i = 0; i < allLocations.length; i++) {
						if (allLocations[i].querySelector('[class*="'+ image +'"]') != null) {
							allLocations[i].classList.add('iso-hidden');
							allLocations[i].classList.remove('iso-active');
							var locationID = allLocations[i].querySelector('.location-result-item__cta.btn').id;
							
							helpers.elementLoaded('img[src*="'+image+'"]', function() {
								var mapData = document.querySelectorAll('div[class*="'+ locationID +'"]');
								for(var i = 0; i < mapData.length; i++) {
									mapData[i].style.display = "none";
								}
							});
						} else {
							allLocations[i].classList.add('iso-active');
						}
					}
	
			    helpers.elementLoaded('img[src*="'+image+'"]', function() {
			      var selectedImages = document.querySelectorAll('img[src*="'+image+'"]');
				
						for(var i = 0; i < selectedImages.length; i++) {
							selectedImages[i].parentNode.style.display = 'none';
							selectedImages[i].style.display = 'none';
						}
					});

				});
			});
		},
		updateOrder : function() {
			isoTest.log('updateOrder()');

			// var allLocations = document.querySelectorAll('#location .search-results-wrapper .search-results ul .location-result-item.active');
			var allLocations = document.querySelectorAll('#location .search-results-wrapper .search-results ul .location-result-item.iso-active');

			for(var i = 0; i < allLocations.length; i++) {
				allLocations[i].querySelector('.location-index').innerHTML = i + 1;
				var locationID = allLocations[i].querySelector('.location-result-item__cta.btn').id;
				var mapData = document.querySelectorAll('div[class*="'+ locationID +'"]');
				for(var a = 0; a < mapData.length; a++) {
					mapData[a].innerHTML = i + 1;
				}
			}
		},
		updateCityFilter : function() {
			helpers.elementLoaded(isoTest.selectorLocations, function() {
				helpers.elementLoaded(isoTest.mapSelector, function() {
					// var allLocations = document.querySelectorAll('#location .search-results-wrapper .search-results ul .location-result-item.active');
					var allLocations = document.querySelectorAll('#location .search-results-wrapper .search-results ul .location-result-item');

					for(var i = 0; i < allLocations.length; i++) {
						if (!allLocations[i].querySelector('i.icon')) {
							allLocations[i].classList.add('iso-hidden');
							allLocations[i].classList.remove('iso-active');
							var locationID = allLocations[i].querySelector('.location-result-item__cta.btn').id;
							
							helpers.elementLoaded(isoTest.mapSelector, function() {
								var mapData = document.querySelectorAll('div[class*="'+ locationID +'"]');
								for(var i = 0; i < mapData.length; i++) {
									mapData[i].style.display = "none";
								}
							});
						} else {
							allLocations[i].classList.add('iso-active');
						}
					}
	
			    helpers.elementLoaded(isoTest.mapSelector, function() {
			      var selectedImages = document.querySelectorAll(isoTest.mapSelector);
				
						for(var i = 0; i < selectedImages.length; i++) {
							selectedImages[i].parentNode.style.display = 'none';
							selectedImages[i].style.display = 'none';
						}
					});

				});
			});
		},
		removeCityFilter : function() {
			helpers.elementLoaded(isoTest.selectorLocations, function() {
				helpers.elementLoaded(isoTest.mapSelector, function() {
					// var allLocations = document.querySelectorAll('#location .search-results-wrapper .search-results ul .location-result-item.active');
					var allLocations = document.querySelectorAll('#location .search-results-wrapper .search-results ul .location-result-item');

					for(var i = 0; i < allLocations.length; i++) {
						if (!allLocations[i].querySelector('i.icon')) {
							allLocations[i].classList.add('iso-active');
							allLocations[i].classList.remove('iso-hidden');
							var locationID = allLocations[i].querySelector('.location-result-item__cta.btn').id;
							
							helpers.elementLoaded(isoTest.mapSelector, function() {
								var mapData = document.querySelectorAll('div[class*="'+ locationID +'"]');
								for(var i = 0; i < mapData.length; i++) {
									mapData[i].style.display = "block";
								}
							});
						}
					}
	
			    helpers.elementLoaded(isoTest.mapSelector, function() {
			      var selectedImages = document.querySelectorAll(isoTest.mapSelector);
				
						for(var i = 0; i < selectedImages.length; i++) {
							selectedImages[i].parentNode.style.display = 'block';
							selectedImages[i].style.display = 'block';
						}
					});

				});
			});
		},
		removeUpdate : function(image) {
			isoTest.log('removeUpdate()');
			helpers.elementLoaded(isoTest.selectorLocations, function() {
				helpers.elementLoaded(isoTest.mapSelector, function() {
					var allLocations = document.querySelectorAll('#location .search-results-wrapper .search-results ul .location-result-item.iso-hidden');

					for(var i = 0; i < allLocations.length; i++) {
						if (allLocations[i].querySelector('[class*="'+ image +'"]') != null) {
							allLocations[i].classList.add('iso-active');
							allLocations[i].classList.remove('iso-hidden');
							var locationID = allLocations[i].querySelector('.location-result-item__cta.btn').id;
							
							helpers.elementLoaded('img[src*="'+image+'"]', function() {
								var mapData = document.querySelectorAll('div[class*="'+ locationID +'"]');
								for(var i = 0; i < mapData.length; i++) {
									mapData[i].style.display = "block";
								}
							});
						}
					}document.querySelectorAll('img[src*="port"]');
	
			    helpers.elementLoaded('img[src*="'+image+'"]', function() {
			      var selectedImages = document.querySelectorAll('img[src*="'+image+'"]');
				
						for(var i = 0; i < selectedImages.length; i++) {
							selectedImages[i].parentNode.style.display = 'block';
							selectedImages[i].style.display = 'block';
						}
					});

				});
			});
		},
		addLocationFilter : function() {
			var vehicleFilterHeader = document.querySelector('#location-search-filter-1 .location-search-filter__container-content-header');

			var vehicleTypeFilter = document.querySelector('#location-search-filter-1 .location-search-filter__vehicle-filter');

			var openCheckbox = document.querySelector('#location-search-filter-1 .location-search-filter__container-filter.form-checkbox__label');

			vehicleFilterHeader.after(vehicleTypeFilter);

			vehicleTypeFilter.after(openCheckbox);

			vehicleTypeFilter.insertAdjacentHTML('afterend', isoTest.content);
		},
		addFilterModal : function() {
			if (document.querySelector('.iso-location-filters-modal.iso-modal') == null) {
				document.querySelector('#ip-redirect').insertAdjacentHTML("afterend", isoTest.modal);
			}
		},
		checkModalForChange : function() {
			isoTest.log("checkModalForChange()");

			var exoticsCheckbox = document.querySelector('#checkbox_location_1 .checkbox__label-checkbox');
			var airportCheckbox = document.querySelector('#checkbox_location_2 .checkbox__label-checkbox');
			var portCheckbox = document.querySelector('#checkbox_location_3 .checkbox__label-checkbox');
			var trainCheckbox = document.querySelector('#checkbox_location_4 .checkbox__label-checkbox');
			var cityCheckbox = document.querySelector('#checkbox_location_5 .checkbox__label-checkbox');

			if (isoTest.exoticsLocations == "false") {
				if (exoticsCheckbox.classList.contains('checked')) {
					exoticsCheckbox.classList.remove('checked');
				}
			} else {
				if (!exoticsCheckbox.classList.contains('checked')) {
					exoticsCheckbox.classList.add('checked');
				}
			}

			if (isoTest.airportLocations == "false") {
				if (airportCheckbox.classList.contains('checked')) {
					airportCheckbox.classList.remove('checked');
				}
			} else {
				if (!airportCheckbox.classList.contains('checked')) {
					airportCheckbox.classList.add('checked');
				}
			}

			if (isoTest.portLocations == "false") {
				if (portCheckbox.classList.contains('checked')) {
					portCheckbox.classList.remove('checked');
				}
			} else {
				if (!portCheckbox.classList.contains('checked')) {
					portCheckbox.classList.add('checked');
				}
			}

			if (isoTest.trainLocations == "false") {
				if (trainCheckbox.classList.contains('checked')) {
					trainCheckbox.classList.remove('checked');
				}
			} else {
				if (!trainCheckbox.classList.contains('checked')) {
					trainCheckbox.classList.add('checked');
				}
			}

			if (isoTest.cityLocations == "false") {
				if (cityCheckbox.classList.contains('checked')) {
					cityCheckbox.classList.remove('checked');
				}
			} else {
				if (!cityCheckbox.classList.contains('checked')) {
					cityCheckbox.classList.add('checked');
				}
			}
		},
		addEvents : function() {
			document.querySelector('.iso-modal.iso-location-filters-modal .close-modal').addEventListener('click', function (e) {
				isoTest.checkModalForChange();
				isoTest.destroyModal();
			}, false);

			document.querySelector('.iso-modal.iso-location-filters-modal .close-modal .icon-close-x-white').addEventListener('click', function (e) {
				isoTest.checkModalForChange();
				isoTest.destroyModal();

			}, false);

			document.querySelector('#location-search-filter-1 .location-type-filters-trigger__button').addEventListener('click', function (e) {
				isoTest.modalOpen();
			}, false);


			var filterElements = document.querySelectorAll('.iso-location-filters-modal.iso-modal .location-search-filters-modal__location-search-list .checkbox__label .location-type-checkbox');
			for(var i = 0; i < filterElements.length; i++) {

				filterElements[i].addEventListener('click', function(e){
					if (e.target.parentNode.classList.contains('checked')) {
						e.target.parentNode.classList.remove('checked');
					} else {
						e.target.parentNode.classList.add('checked');
					}
		    }, false);
			}

			document.querySelector('.iso-location-filters-modal.iso-modal .iso-modal-apply').addEventListener('click', function(e){

						isoTest.destroyModal();
						isoTest.checkForFilters("zoom");
	
			}, false);

			document.querySelector('.iso-location-filters-modal.iso-modal .iso-modal-cancel').addEventListener('click', function(e){

				isoTest.checkModalForChange();
				isoTest.destroyModal();

			}, false);

			document.querySelector('.iso-location-filters-modal.iso-modal .iso-clear-location-filter').addEventListener('click', function(e){
				var allchecked = document.querySelectorAll('.iso-location-filters-modal.iso-modal .checkbox__label-checkbox.checked');
				if (allchecked.length > 0) {
					for (var i = 0; i < allchecked.length; i++) {
						allchecked[i].classList.remove('checked');
					}
				}
			}, false);
	

			document.addEventListener('click', function (event) {
				console.log(event.target);
				var parentEl = document.querySelector('#map-canvas');
				var childEl = event.target;
				if (isoTest.contains(parentEl,childEl)) {
					parentEl = document.querySelector('#google-map-custom-controls-wrapper');
					if (isoTest.contains(parentEl,childEl)) {
						window.setTimeout(function(){
							helpers.elementLoaded(isoTest.selectorLocations, function() {
								helpers.elementLoaded(isoTest.mapSelector, function() {
									isoTest.checkForFilters("zoom");
								});
							});
						}, 500);
					} else {
						window.setTimeout(function(){
							isoTest.checkForFilters("drag");
						}, 400);

						window.setTimeout(function(){
							helpers.elementLoaded(isoTest.mapChangeSelector, function() {
								isoTest.checkForReloaded();
							});
						}, 600);
					}
				}

				// if (event.target == document.querySelector('.ReactModal__Content--after-open .modal-button-bar .modal-buttons-container .btn.modal-button')) {
				// 	console.log('equals');
				// }
			}, false);



		},
		contains : function(parent, child) {
			return parent !== child && parent.contains(child);
		},
		modalOpen : function() {
			document.querySelector('.iso-modal.iso-location-filters-modal').classList.add('active');
			document.querySelector('html').classList.add('iso-modal-open');

      var modalFocus = document.querySelector('.iso-modal.iso-location-filters-modal');
      isoTest.keepFocus(modalFocus);

      modalFocus.focus();

      // isoTest.fireTag('.iso-details-link','See Details');
		},
		destroyModal : function() {
      document.querySelector('html').classList.remove('iso-modal-open');
      var elModal = document.querySelector('.iso-modal.iso-location-filters-modal');
			elModal.classList.remove('active');
    },
    keepFocus : function(context) {
      var allTabbableElements = context.querySelectorAll(isoTest.tabbableElements),
          firstTabbableElement = allTabbableElements[0],
          lastTabbableElement = allTabbableElements[allTabbableElements.length - 1];
      var keyListener = function(e) {
    		var keyCode = e.which || e.keyCode;

    		e.preventDefault = e.preventDefault || function () {
    			e.returnValue = false;
    		};
    		if (keyCode === 9) {
          if (e.target === lastTabbableElement && !e.shiftKey) {
    				e.preventDefault();
    				firstTabbableElement.focus();
          } else if (e.target === firstTabbableElement && e.shiftKey) {
    				e.preventDefault();
    				lastTabbableElement.focus();
    			}
    		}
    	};
    	context.addEventListener('keydown', keyListener, false);
    },
		fireTag : function(element, value) {
			var linkName = value ? value : element.innerText;
				linkName = isoTest.test ? isoTest.test + ' : ' + linkName : linkName;
			s.linkTrackVars = 'eVar20';
			s.eVar20 = linkName;
			s.tl(this, 'o', linkName);
		},
		log : function(obj){
			if(isoTest.debug === true){
				console.log(obj);
			}
		}
	}

	var helpers = {
		elementLoaded : function (ele, callback) {
			isoTest.log('elementLoaded::  ' + ele + ' - Checking...');
			window.clearTimeout(isoTest.eleTimer);
			if (document.querySelectorAll(ele).length > 0) {
				if (typeof callback === 'function') {
					isoTest.log('elementLoaded::  ' + ele + ' - Found!');
					callback();
				}
	        } else {
	            isoTest.eleTimer = window.setTimeout(function(){helpers.elementLoaded(ele, callback);}, 100);
	        }
		}
	}

	isoTest.init();
})();
</script>
